var h=void 0,k=!0,l=null,m=!1;function o(){return function(){}}function aa(a){return function(){return this[a]}}var r,s=this;function ba(a,b){var c=a.split("."),d=s;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&b!==h?d[f]=b:d=d[f]?d[f]:d[f]={}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function t(a){return"array"==ca(a)}function da(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function u(a){return"string"==typeof a}function ea(a){return"function"==ca(a)}function fa(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}var ga="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ha=0;function ia(a,b,c){return a.call.apply(a.bind,arguments)}
function ja(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ka(a,b,c){ka=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return ka.apply(l,arguments)}
function la(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}function qa(a,b){function c(){}c.prototype=b.prototype;a.Gb=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ra(a,b){this.x=a;this.y=b};function sa(a){this.points=a}function ta(a){for(var b=0,c=a.length-1,d=0;d<a.length;d++)b+=(a[c].x+a[d].x)*(a[c].y-a[d].y),c=d;return b/2}
function ua(a,b){var c,d;d=c=0;for(var f,e=a.length-1,g=0;g<a.length;g++)f=a[g].x*a[e].y-a[e].x*a[g].y,c+=(a[g].x+a[e].x)*f,d+=(a[g].y+a[e].y)*f,e=g;f=6*ta(a);c=Math.abs(c/f);d=Math.abs(d/f);f=[];for(e=0;e<a.length;e++){var g=a[e],j=(0>ta(a)?-1:1)*b,i=g.x-c,n=g.y-d,w=0<j?1:0>j?-1:0,j=Math.sqrt(Math.pow(j,2)/(1+Math.pow(i/n,2)));f.push({x:g.x+Math.abs(i/n*j)*(0<i?1:0>i?-1:0)*w,y:g.y+Math.abs(j)*(0<n?1:0>n?-1:0)*w})}return f};function va(a,b,c,d){0<c?(this.x=a,this.width=c):(this.x=a+c,this.width=-c);0<d?(this.y=b,this.height=d):(this.y=b+d,this.height=-d)};function wa(a,b){this.type=a;this.geometry=b}function xa(a){return"rect"==a.type?a.geometry.width*a.geometry.height:"polygon"==a.type?Math.abs(ta(a.geometry.points)):0}function ya(a){if("rect"==a.type)return a;if("polygon"==a.type){for(var a=a.geometry.points,b=a[0].x,c=a[0].x,d=a[0].y,f=a[0].y,e=1;e<a.length;e++)a[e].x>c&&(c=a[e].x),a[e].x<b&&(b=a[e].x),a[e].y>f&&(f=a[e].y),a[e].y<d&&(d=a[e].y);return new wa("rect",new va(b,d,c-b,f-d))}}
function za(a,b){var c;c=a.geometry.points;var d=0>ta(c)?-1:1;if(4>c.length)c=ua(c,d*b);else{for(var f=c.length-1,e=1,g=[],j=0;j<c.length;j++)f=ua([c[f],c[j],c[e]],d*b),g.push(f[1]),f=j,e++,e>c.length-1&&(e=0);c=g}return new wa("polygon",new sa(c))}
function Aa(a,b){if("rect"==a.type){var c=a.geometry,d=b({x:c.x,y:c.y}),c=b({x:c.x+c.width,y:c.y+c.height});return new wa("rect",new va(d.x,d.y,c.x-d.x,c.y-d.y))}if("polygon"==a.type){var f=[];x(a.geometry.points,function(a){f.push(b(a))});return new wa("polygon",new sa(f))}}function Ba(a){return JSON.stringify(a.geometry)}window.annotorious||(window.annotorious={});window.annotorious.geometry||(window.annotorious.geometry={},window.annotorious.geometry.expand=za);function Ca(){}function Da(a,b){a.h=new Ea;a.gb=[];a.ma=[];a.eb=[];b&&Fa(a.eb,b);a.ka=[];b&&Fa(a.ka,b);a.Y=[];a.Ha=[];a.jb=k;Ga(a);var c=y(window,Ha,function(){0<a.ka.length?Ga(a):Ia(c)})}function Ga(a){x(a.ka,function(b){for(var c=b,d=c.offsetTop,f=c.offsetLeft,e=c.offsetWidth,g=c.offsetHeight;c.offsetParent;)c=c.offsetParent,d+=c.offsetTop,f+=c.offsetLeft;d<window.pageYOffset+window.innerHeight&&f<window.pageXOffset+window.innerWidth&&d+g>window.pageYOffset&&f+e>window.pageXOffset&&Ja(a,b)})}
function Ja(a,b){var c=[],d=[],f=a.Bb(b);a.jb||f.W(m);var e=a.Xa(b);x(a.gb,function(a){f.f(a.type,a.ya)});x(a.ma,function(a){if(a.onInitAnnotator)a.onInitAnnotator(f)});x(a.Y,function(a){a.src==image_src&&(f.o(a),c.push(a))});x(a.Ha,function(a){a.src==image_src&&(f.n(a),d.push(a))});x(c,function(b){z(a.Y,b)});x(d,function(b){z(a.Ha,b)});a.h.set(e,f);z(a.ka,b)}r=Ca.prototype;r.o=function(a,b){if(A(this,a.src)){var c=this.h.get(a.src);c?c.o(a,b):(this.Y.push(a),b&&z(this.Y,b))}};
r.f=function(a,b){x(Na(this.h),function(c){c.f(a,b)});this.gb.push({type:a,ya:b})};r.Ta=function(a){this.ma.push(a);x(Na(this.h),function(b){if(a.onInitAnnotator)a.onInitAnnotator(b)})};r.ba=function(a,b){if(A(this,a)){var c=this.h.get(a);c&&c.ba(b)}};function A(a,b){return Object.prototype.hasOwnProperty.call(a.h.N,b)?k:B(a.ka,function(c){return a.Xa(c)==b})!=l}r.R=function(a){if(A(this,a)&&(a=this.h.get(a)))return a.R().getName()};
r.C=function(a){if(a){var b=this.h.get(a);return b?b.C():Oa(this.Y,function(b){return b.src==a})}var c=[];x(Na(this.h),function(a){Fa(c,a.C())});Fa(c,this.Y);return c};r.S=function(a){if(A(this,a)&&(a=this.h.get(a)))return Pa(a.S(),function(a){return a.getName()})};r.l=function(a){if(a){if(A(this,a.src)){var b=this.h.get(a.src);b&&b.l(a)}}else x(Na(this.h),function(a){a.l()})};r.Za=function(a){this.cb(a)&&(this.eb.push(a),Ja(this,a))};
r.n=function(a){if(A(this,a.src)){var b=this.h.get(a.src);b?b.n(a):this.Ha.push(a)}};r.ga=function(a,b){if(A(this,a)){var c=this.h.get(a);c&&c.ga(b)}};r.W=function(a){this.jb=a;x(Na(this.h),function(b){b.W(a)})};function Qa(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ra(a){if(!Sa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ta,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ua,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Va,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Wa,"&quot;"));return a}var Ta=/&/g,Ua=/</g,Va=/>/g,Wa=/\"/g,Sa=/[&<>\"]/,Xa={};function Ya(a){return Xa[a]||(Xa[a]=(""+a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()}))};var D=Array.prototype,Za=D.indexOf?function(a,b,c){return D.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(u(a))return!u(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},x=D.forEach?function(a,b,c){D.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=u(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},Oa=D.filter?function(a,b,c){return D.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],e=0,g=u(a)?a.split(""):
a,j=0;j<d;j++)if(j in g){var i=g[j];b.call(c,i,j,a)&&(f[e++]=i)}return f},Pa=D.map?function(a,b,c){return D.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),e=u(a)?a.split(""):a,g=0;g<d;g++)g in e&&(f[g]=b.call(c,e[g],g,a));return f};function B(a,b){var c;a:{c=a.length;for(var d=u(a)?a.split(""):a,f=0;f<c;f++)if(f in d&&b.call(h,d[f],f,a)){c=f;break a}c=-1}return 0>c?l:u(a)?a.charAt(c):a[c]}function z(a,b){var c=Za(a,b);0<=c&&D.splice.call(a,c,1)}
function $a(a){return D.concat.apply(D,arguments)}function ab(a){if(t(a))return $a(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Fa(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(t(d)||(f=da(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var e=a.length,g=d.length,j=0;j<g;j++)a[e+j]=d[j];else a.push(d)}}function bb(a,b,c,d){D.splice.apply(a,cb(arguments,1))}function cb(a,b,c){return 2>=arguments.length?D.slice.call(a,b):D.slice.call(a,b,c)}
function db(a,b){D.sort.call(a,b||eb)}function eb(a,b){return a>b?1:a<b?-1:0};var hb,ib,jb,kb,lb;function mb(){return s.navigator?s.navigator.userAgent:l}function nb(){return s.navigator}kb=jb=ib=hb=m;var ob;if(ob=mb()){var pb=nb();hb=0==ob.indexOf("Opera");ib=!hb&&-1!=ob.indexOf("MSIE");jb=!hb&&-1!=ob.indexOf("WebKit");kb=!hb&&!jb&&"Gecko"==pb.product}var qb=hb,G=ib,H=kb,I=jb,rb=nb();lb=-1!=(rb&&rb.platform||"").indexOf("Mac");var sb=!!nb()&&-1!=(nb().appVersion||"").indexOf("X11"),tb;
a:{var ub="",vb;if(qb&&s.opera)var wb=s.opera.version,ub="function"==typeof wb?wb():wb;else if(H?vb=/rv\:([^\);]+)(\)|;)/:G?vb=/MSIE\s+([^\);]+)(\)|;)/:I&&(vb=/WebKit\/(\S+)/),vb)var xb=vb.exec(mb()),ub=xb?xb[1]:"";if(G){var yb,zb=s.document;yb=zb?zb.documentMode:h;if(yb>parseFloat(ub)){tb=""+yb;break a}}tb=ub}var Ab={};
function K(a){var b;if(!(b=Ab[a])){b=0;for(var c=Qa(""+tb).split("."),d=Qa(""+a).split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var g=c[e]||"",j=d[e]||"",i=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var w=i.exec(g)||["","",""],p=n.exec(j)||["","",""];if(0==w[0].length&&0==p[0].length)break;b=((0==w[1].length?0:parseInt(w[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==w[1].length?0:parseInt(w[1],10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==w[2].length)<(0==
p[2].length)?-1:(0==w[2].length)>(0==p[2].length)?1:0)||(w[2]<p[2]?-1:w[2]>p[2]?1:0)}while(0==b)}b=Ab[a]=0<=b}return b}var Bb={};function Cb(a){return Bb[a]||(Bb[a]=G&&!!document.documentMode&&document.documentMode>=a)};var Db,Eb=!G||Cb(9);!H&&!G||G&&Cb(9)||H&&K("1.9.1");G&&K("9");var Hb=G||qb||I;function Ib(a){return(a=a.className)&&"function"==typeof a.split?a.split(/\s+/):[]}function Jb(a,b){var c=Ib(a),d=cb(arguments,1),d=Kb(c,d);a.className=c.join(" ");return d}function Lb(a,b){var c=Ib(a),d=cb(arguments,1);Mb(c,d);a.className=c.join(" ")}function Kb(a,b){for(var c=0,d=0;d<b.length;d++)0<=Za(a,b[d])||(a.push(b[d]),c++);return c==b.length}function Mb(a,b){for(var c=0,d=0;d<a.length;d++)0<=Za(b,a[d])&&(bb(a,d--,1),c++)}
function Nb(a,b,c){var d=Ib(a);u(b)?z(d,b):t(b)&&Mb(d,b);u(c)&&!(0<=Za(d,c))?d.push(c):t(c)&&Kb(d,c);a.className=d.join(" ")};function Ob(a,b){this.x=a!==h?a:0;this.y=b!==h?b:0};function Pb(a,b){this.width=a;this.height=b}Pb.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Pb.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Qb(a,b){for(var c in a)b.call(h,a[c],c,a)}var Rb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Sb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<Rb.length;e++)c=Rb[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Tb(a){return a?new Ub(Vb(a)):Db||(Db=new Ub)}function Wb(a,b){Qb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Xb?a.setAttribute(Xb[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}var Xb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function Yb(a){var b=!I?a.documentElement:a.body,a=a.parentWindow||a.defaultView;return new Ob(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}
function Zb(a,b,c){var d=arguments,f=document,e=d[0],g=d[1];if(!Eb&&g&&(g.name||g.type)){e=["<",e];g.name&&e.push(' name="',Ra(g.name),'"');if(g.type){e.push(' type="',Ra(g.type),'"');var j={};Sb(j,g);g=j;delete g.type}e.push(">");e=e.join("")}e=f.createElement(e);g&&(u(g)?e.className=g:t(g)?Jb.apply(l,[e].concat(g)):Wb(e,g));2<d.length&&$b(f,e,d,2);return e}
function $b(a,b,c,d){function f(c){c&&b.appendChild(u(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var e=c[d];da(e)&&!(fa(e)&&0<e.nodeType)?x(ac(e)?ab(e):e,f):f(e)}}function bc(a){for(var b;b=a.firstChild;)a.removeChild(b)}function cc(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)}function dc(a){return fa(a)&&1==a.nodeType}function ec(a){if(Hb)return a.parentElement;a=a.parentNode;return dc(a)?a:l}
function fc(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Vb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function ac(a){if(a&&"number"==typeof a.length){if(fa(a))return"function"==typeof a.item||"string"==typeof a.item;if(ea(a))return"function"==typeof a.item}return m}function Ub(a){this.ra=a||s.document||document}r=Ub.prototype;
r.createElement=function(a){return this.ra.createElement(a)};r.createTextNode=function(a){return this.ra.createTextNode(a)};r.appendChild=function(a,b){a.appendChild(b)};r.append=function(a,b){$b(Vb(a),a,arguments,1)};r.contains=fc;function L(a,b){var c=Tb().createElement("DIV");c.innerHTML=a(b||gc,h,h);if(1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType)return d}return c}var gc={};function hc(){return k};/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

 The "New" BSD License:

 Copyright (c) 2005-2009, The Dojo Foundation
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
 list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
 this list of conditions and the following disclaimer in the documentation
 and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
 may be used to endorse or promote products derived from this software
 without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
 FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var M=function(){function a(a,c){if(!a)return[];if(a.constructor==Array)return a;if(!u(a))return[a];if(u(c)&&(c=u(c)?document.getElementById(c):c,!c))return[];var c=c||document,e=c.ownerDocument||c.documentElement;na=c.contentType&&"application/xml"==c.contentType||qb&&(c.doctype||"[object XMLDocument]"==e.toString())||!!e&&(G?e.xml:c.xmlVersion||e.xmlVersion);return(e=d(a)(c))&&e.Ca?e:b(e)}function b(a){if(a&&a.Ca)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;
O++;if(G&&na){var c=O+"";a[0].setAttribute("_zipIdx",c);for(var d=1,e;e=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(e),e.setAttribute("_zipIdx",c)}else if(G&&a.Mb)try{for(d=1;e=a[d];d++)fb(e)&&b.push(e)}catch(f){}else{a[0]&&(a[0]._zipIdx=O);for(d=1;e=a[d];d++)a[d]._zipIdx!=O&&b.push(e),e._zipIdx=O}return b}function c(a,b){if(!b)return 1;var c=Ad(a);return!b[c]?b[c]=1:0}function d(a,b){if(xc){var c=yc[a];if(c&&!b)return c}if(c=zc[a])return c;var c=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&
e&&(b=k);if(xc&&!b&&-1==">~+".indexOf(c)&&(!G||-1==a.indexOf(":"))&&!(Ac&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var g=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return yc[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(g);G?c.Mb=k:c.Ca=k;return c}catch(f){return d(a,k)(b)}}}var i=a.split(/\s*,\s*/);return zc[a]=2>i.length?f(a):function(a){for(var b=0,c=[],d;d=i[b++];)c=c.concat(f(d)(a));return c}}function f(a){var b=Bc(Qa(a));if(1==b.length){var c=
e(b[0]);return function(a){if(a=c(a,[]))a.Ca=k;return a}}return function(a){for(var a=Ka(a),c,d,f=b.length,g,ma,Fb=0;Fb<f;Fb++){ma=[];c=b[Fb];d=a.length-1;0<d&&(g={},ma.Ca=k);d=e(c);for(var i=0;c=a[i];i++)d(c,ma,g);if(!ma.length)break;a=ma}return ma}}function e(a){var b=Cc[a.da];if(b)return b;var c=a.wb,c=c?c.Da:"",d=n(a,{t:1}),e="*"==a.v,f=document.getElementsByClassName;if(c)f={t:1},e&&(f.v=1),d=n(a,f),"+"==c?b=i(d):"~"==c?b=j(d):">"==c&&(b=g(d));else if(a.id)d=!a.zb&&e?hc:n(a,{t:1,id:1}),b=function(b,
c){var e;e=Tb(b);var f=a.id;if(f=(e=u(f)?e.ra.getElementById(f):f)&&d(e))if(!(f=9==b.nodeType)){for(f=e.parentNode;f&&!(f==b);)f=f.parentNode;f=!!f}if(f)return Ka(e,c)};else if(f&&/\{\s*\[native code\]\s*\}/.test(""+f)&&a.J.length&&!Ac)var d=n(a,{t:1,J:1,id:1}),p=a.J.join(" "),b=function(a,b){for(var c=Ka(0,b),e,f=0,g=a.getElementsByClassName(p);e=g[f++];)d(e,a)&&c.push(e);return c};else!e&&!a.zb?b=function(b,c){for(var d=Ka(0,c),e,f=0,g=b.getElementsByTagName(a.Ya());e=g[f++];)d.push(e);return d}:
(d=n(a,{t:1,v:1,id:1}),b=function(b,c){for(var e=Ka(0,c),f,g=0,zd=b.getElementsByTagName(a.Ya());f=zd[g++];)d(f,b)&&e.push(f);return e});return Cc[a.da]=b}function g(a){a=a||hc;return function(b,d,e){for(var f=0,g=b[Dc];b=g[f++];)La(b)&&(!e||c(b,e))&&a(b,f)&&d.push(b);return d}}function j(a){return function(b,d,e){for(b=b[Ma];b;){if(La(b)){if(e&&!c(b,e))break;a(b)&&d.push(b)}b=b[Ma]}return d}}function i(a){return function(b,d,e){for(;b=b[Ma];)if(!gb||fb(b)){(!e||c(b,e))&&a(b)&&d.push(b);break}return d}}
function n(a,b){if(!a)return hc;var b=b||{},c=l;b.t||(c=oa(c,fb));b.v||"*"!=a.v&&(c=oa(c,function(b){return b&&b.tagName==a.Ya()}));b.J||x(a.J,function(a,b){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=oa(c,function(a){return d.test(a.className)});c.count=b});b.T||x(a.T,function(a){var b=a.name;Gb[b]&&(c=oa(c,Gb[b](b,a.value)))});b.va||x(a.va,function(a){var b,d=a.Ua;a.type&&Ec[a.type]?b=Ec[a.type](d,a.$a):d.length&&(b=Bd(d));b&&(c=oa(c,b))});b.id||a.id&&(c=oa(c,function(b){return!!b&&b.id==a.id}));
c||"default"in b||(c=hc);return c}function w(a){return J(a)%2}function p(a){return!(J(a)%2)}function J(a){var b=a.parentNode,c=0,d=b[Dc],e=a._i||-1,f=b._l||-1;if(!d)return-1;d=d.length;if(f==d&&0<=e&&0<=f)return e;b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[Ma])La(b)&&(b._i=++c,a===b&&(e=c));return e}function C(a){for(;a=a[Ma];)if(La(a))return m;return k}function Fc(a){for(;a=a[Cd];)if(La(a))return m;return k}function pa(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||
"":"style"==b?a.style.cssText||"":(na?a.getAttribute(b):a.getAttribute(b,2))||""}function fb(a){return 1==a.nodeType}function oa(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}}function Bc(a){function b(){0<=n&&(q.id=c(n,v).replace(/\\/g,""),n=-1);if(0<=p){var a=p==v?l:c(p,v);0>">~+".indexOf(a)?q.v=a:q.Da=a;p=-1}0<=j&&(q.J.push(c(j+1,v).replace(/\\/g,"")),j=-1)}function c(b,d){return Qa(a.slice(b,d))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",
d=[],e=-1,f=-1,g=-1,i=-1,j=-1,n=-1,p=-1,w="",E="",C,v=0,J=a.length,q=l,F=l;w=E,E=a.charAt(v),v<J;v++)if("\\"!=w)if(q||(C=v,q={da:l,T:[],va:[],J:[],v:l,Da:l,id:l,Ya:function(){return na?this.Rb:this.v}},p=v),0<=e)if("]"==E){F.Ua?F.$a=c(g||e+1,v):F.Ua=c(e+1,v);if((e=F.$a)&&('"'==e.charAt(0)||"'"==e.charAt(0)))F.$a=e.slice(1,-1);q.va.push(F);F=l;e=g=-1}else"="==E&&(g=0<="|~^$*".indexOf(w)?w:"",F.type=g+E,F.Ua=c(e+1,v-g.length),g=v+1);else 0<=f?")"==E&&(0<=i&&(F.value=c(f+1,v)),i=f=-1):"#"==E?(b(),n=
v+1):"."==E?(b(),j=v):":"==E?(b(),i=v):"["==E?(b(),e=v,F={}):"("==E?(0<=i&&(F={name:c(i+1,v),value:l},q.T.push(F)),f=v):" "==E&&w!=E&&(b(),0<=i&&q.T.push({name:c(i+1,v)}),q.zb=q.T.length||q.va.length||q.J.length,q.ac=q.da=c(C,v),q.Rb=q.v=q.Da?l:q.v||"*",q.v&&(q.v=q.v.toUpperCase()),d.length&&d[d.length-1].Da&&(q.wb=d.pop(),q.da=q.wb.da+" "+q.da),d.push(q),q=l);return d}function Ka(a,b){var c=b||[];a&&c.push(a);return c}var Ac=I&&"BackCompat"==document.compatMode,Dc=document.firstChild.children?"children":
"childNodes",na=m,Ec={"*=":function(a,b){return function(c){return 0<=pa(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==pa(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+pa(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+pa(b,a)+" ").indexOf(c)}},"|=":function(a,b){b=" "+b;return function(c){c=" "+pa(c,a);return c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return pa(c,a)==b}}},
gb="undefined"==typeof document.firstChild.nextElementSibling,Ma=!gb?"nextElementSibling":"nextSibling",Cd=!gb?"previousElementSibling":"previousSibling",La=gb?fb:hc,Gb={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return Fc},"last-child":function(){return C},"only-child":function(){return function(a){return!Fc(a)||!C(a)?m:k}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;
if(1===c||3==c)return m}return k}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=Bc(b)[0],d={t:1};"*"!=c.v&&(d.v=1);c.J.length||(d.J=1);var e=n(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){if("odd"==b)return w;if("even"==b)return p;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,e=c[1]?parseInt(c[1],10):0,f=0,g=-1;0<d?0>e?e=e%d&&d+e%d:0<
e&&(e>=d&&(f=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(g=e,e%=d));if(0<d)return function(a){a=J(a);return a>=f&&(0>g||a<=g)&&a%d==e};b=e}var i=parseInt(b,10);return function(a){return J(a)==i}}},Bd=G?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return na?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},Cc={},zc={},yc={},xc=!!document.querySelectorAll&&(!I||K("526")),O=0,Ad=G?function(a){return na?a.getAttribute("_uid")||
a.setAttribute("_uid",++O)||O:a.uniqueID}:function(a){return a._uid||(a._uid=++O)};a.T=Gb;return a}();ba("goog.dom.query",M);ba("goog.dom.query.pseudos",M.T);!G||Cb(9);var ic=!G||Cb(9),jc=G&&!K("8");!I||K("528");H&&K("1.9b")||G&&K("8")||qb&&K("9.5")||I&&K("528");!H||K("8");function kc(){}kc.prototype.sb=m;kc.prototype.wa=function(){this.sb||(this.sb=k,this.xa())};kc.prototype.xa=function(){this.Ob&&lc.apply(l,this.Ob)};function lc(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];da(d)?lc.apply(l,d):d&&"function"==typeof d.wa&&d.wa()}};function N(a,b){this.type=a;this.currentTarget=this.target=b}qa(N,kc);N.prototype.xa=function(){delete this.type;delete this.target;delete this.currentTarget};N.prototype.bb=m;N.prototype.Eb=k;N.prototype.preventDefault=function(){this.Eb=m};var Ha="scroll";function mc(a){mc[" "](a);return a}mc[" "]=o();function nc(a,b){a&&this.init(a,b)}qa(nc,N);r=nc.prototype;r.target=l;r.relatedTarget=l;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=m;r.altKey=m;r.shiftKey=m;r.metaKey=m;r.ca=l;
r.init=function(a,b){var c=this.type=a.type;N.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(H){var f;a:{try{mc(d.nodeName);f=k;break a}catch(e){}f=m}f||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=I||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=I||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=
a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.ca=a;delete this.Eb;delete this.bb};r.preventDefault=function(){nc.Gb.preventDefault.call(this);var a=this.ca;if(a.preventDefault)a.preventDefault();else if(a.returnValue=m,jc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};
r.Pb=aa("ca");r.xa=function(){nc.Gb.xa.call(this);this.relatedTarget=this.currentTarget=this.target=this.ca=l};function oc(){}var pc=0;r=oc.prototype;r.key=0;r.fa=m;r.qb=m;r.init=function(a,b,c,d,f,e){if(ea(a))this.yb=k;else if(a&&a.handleEvent&&ea(a.handleEvent))this.yb=m;else throw Error("Invalid listener argument");this.za=a;this.Cb=b;this.src=c;this.type=d;this.capture=!!f;this.ya=e;this.qb=m;this.key=++pc;this.fa=m};r.handleEvent=function(a){return this.yb?this.za.call(this.ya||this.src,a):this.za.handleEvent.call(this.za,a)};var qc={},P={},rc={},sc={};
function y(a,b,c,d,f){if(b){if(t(b)){for(var e=0;e<b.length;e++)y(a,b[e],c,d,f);return l}var d=!!d,g=P;b in g||(g[b]={r:0,U:0});g=g[b];d in g||(g[d]={r:0,U:0},g.r++);var g=g[d],j=a[ga]||(a[ga]=++ha),i;g.U++;if(g[j]){i=g[j];for(e=0;e<i.length;e++)if(g=i[e],g.za==c&&g.ya==f){if(g.fa)break;return i[e].key}}else i=g[j]=[],g.r++;e=tc();e.src=a;g=new oc;g.init(c,e,a,b,d,f);c=g.key;e.key=c;i.push(g);qc[c]=g;rc[j]||(rc[j]=[]);rc[j].push(g);a.addEventListener?(a==s||!a.Nb)&&a.addEventListener(b,e,d):a.attachEvent(b in
sc?sc[b]:sc[b]="on"+b,e);return c}throw Error("Invalid event type");}function tc(){var a=uc,b=ic?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}
function Ia(a){if(qc[a]){var b=qc[a];if(!b.fa){var c=b.src,d=b.type,f=b.Cb,e=b.capture;c.removeEventListener?(c==s||!c.Nb)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in sc?sc[d]:sc[d]="on"+d,f);c=c[ga]||(c[ga]=++ha);f=P[d][e][c];if(rc[c]){var g=rc[c];z(g,b);0==g.length&&delete rc[c]}b.fa=k;f.Ab=k;vc(d,e,c,f);delete qc[a]}}}
function vc(a,b,c,d){if(!d.Aa&&d.Ab){for(var f=0,e=0;f<d.length;f++)d[f].fa?d[f].Cb.src=l:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.Ab=m;0==e&&(delete P[a][b][c],P[a][b].r--,0==P[a][b].r&&(delete P[a][b],P[a].r--),0==P[a].r&&delete P[a])}}function wc(a,b,c,d,f){var e=1,b=b[ga]||(b[ga]=++ha);if(a[b]){a.U--;a=a[b];a.Aa?a.Aa++:a.Aa=1;try{for(var g=a.length,j=0;j<g;j++){var i=a[j];i&&!i.fa&&(e&=Gc(i,f)!==m)}}finally{a.Aa--,vc(c,d,b,a)}}return Boolean(e)}
function Gc(a,b){var c=a.handleEvent(b);a.qb&&Ia(a.key);return c}
function uc(a,b){if(!qc[a])return k;var c=qc[a],d=c.type,f=P;if(!(d in f))return k;var f=f[d],e,g;if(!ic){var j;if(!(j=b))a:{j=["window","event"];for(var i=s;e=j.shift();)if(i[e]!=l)i=i[e];else{j=l;break a}j=i}e=j;j=k in f;i=m in f;if(j){if(0>e.keyCode||e.returnValue!=h)return k;a:{var n=m;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(w){n=k}if(n||e.returnValue==h)e.returnValue=k}}n=new nc;n.init(e,this);e=k;try{if(j){for(var p=[],J=n.currentTarget;J;J=J.parentNode)p.push(J);g=f[k];g.U=g.r;for(var C=
p.length-1;!n.bb&&0<=C&&g.U;C--)n.currentTarget=p[C],e&=wc(g,p[C],d,k,n);if(i){g=f[m];g.U=g.r;for(C=0;!n.bb&&C<p.length&&g.U;C++)n.currentTarget=p[C],e&=wc(g,p[C],d,m,n)}}else e=Gc(c,n)}finally{p&&(p.length=0),n.wa()}return e}d=new nc(b,this);try{e=Gc(c,d)}finally{d.wa()}return e};function Hc(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Hc.prototype.contains=function(a){return!this||!a?m:a instanceof Hc?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Ic(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Ic.prototype.contains=function(a){return a instanceof Ic?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function Q(a,b,c){u(b)?Jc(a,c,b):Qb(b,la(Jc,a))}function Jc(a,b,c){a.style[Ya(c)]=b}function R(a,b){var c=Vb(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,l))?c[b]||c.getPropertyValue(b):""}function Kc(a,b){return a.currentStyle?a.currentStyle[b]:l}function Lc(a,b){return R(a,b)||Kc(a,b)||a.style&&a.style[b]}function Mc(a,b,c){var d,f=H&&(lb||sb)&&K("1.9");b instanceof Ob?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Nc(d,f);a.style.top=Nc(b,f)}
function Oc(a){var b=a.getBoundingClientRect();G&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Pc(a){if(G&&!Cb(8))return a.offsetParent;for(var b=Vb(a),c=Lc(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Lc(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return l}
function Qc(a){var b,c=Vb(a),d=Lc(a,"position"),f=H&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),e=new Ob(0,0),g;b=c?9==c.nodeType?c:Vb(c):document;if(g=G)if(g=!Cb(9))Tb(b),g=m;g=g?b.body:b.documentElement;if(a==g)return e;if(a.getBoundingClientRect)b=Oc(a),a=Tb(c),a=Yb(a.ra),e.x=b.left+a.x,e.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),e.x=b.screenX-a.screenX,e.y=b.screenY-a.screenY;else{b=
a;do{e.x+=b.offsetLeft;e.y+=b.offsetTop;b!=a&&(e.x+=b.clientLeft||0,e.y+=b.clientTop||0);if(I&&"fixed"==Lc(b,"position")){e.x+=c.body.scrollLeft;e.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(qb||I&&"absolute"==d)e.y-=c.body.offsetTop;for(b=a;(b=Pc(b))&&b!=c.body&&b!=g;)if(e.x-=b.scrollLeft,!qb||"TR"!=b.tagName)e.y-=b.scrollTop}return e}function Rc(a,b){var c=Sc(a),d=Sc(b);return new Ob(c.x-d.x,c.y-d.y)}
function Sc(a){var b=new Ob;if(1==a.nodeType)if(a.getBoundingClientRect)a=Oc(a),b.x=a.left,b.y=a.top;else{var c;c=Tb(a);c=Yb(c.ra);a=Qc(a);b.x=a.x-c.x;b.y=a.y-c.y}else{c=ea(a.Pb);var d=a;a.targetTouches?d=a.targetTouches[0]:c&&a.ca.targetTouches&&(d=a.ca.targetTouches[0]);b.x=d.clientX;b.y=d.clientY}return b}function Tc(a,b,c){if(b instanceof Pb)c=b.height,b=b.width;else if(c==h)throw Error("missing height argument");a.style.width=Nc(b,k);a.style.height=Nc(c,k)}
function Nc(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Uc(a){if("none"!=Lc(a,"display"))return Vc(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Vc(a);b.display=c;b.position=f;b.visibility=d;return a}function Vc(a){var b=a.offsetWidth,c=a.offsetHeight,d=I&&!b&&!c;return(b===h||d)&&a.getBoundingClientRect?(a=Oc(a),new Pb(a.right-a.left,a.bottom-a.top)):new Pb(b,c)}
function Wc(a){var b=Qc(a),a=Uc(a);return new Ic(b.x,b.y,a.width,a.height)}function S(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function T(a,b){a.style.display=b?"":"none"}function Xc(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}
function Yc(a,b){if(G){var c=Xc(a,Kc(a,b+"Left")),d=Xc(a,Kc(a,b+"Right")),f=Xc(a,Kc(a,b+"Top")),e=Xc(a,Kc(a,b+"Bottom"));return new Hc(f,d,e,c)}c=R(a,b+"Left");d=R(a,b+"Right");f=R(a,b+"Top");e=R(a,b+"Bottom");return new Hc(parseFloat(f),parseFloat(d),parseFloat(e),parseFloat(c))};function Zc(a,b){var c;this.O=a;this.j=new $c;this.pa=[];this.pb=k;var d=Wc(a);this.element=Zb("div","annotorious-annotationlayer");Q(this.element,"position","relative");Q(this.element,"display","inline-block");ad(a,this.element);Tc(this.element,d.width,d.height);cc(this.element,a);this.element.appendChild(a);c=L(bd,{width:d.width,height:d.height});Jb(c,"annotorious-item-unfocus");this.element.appendChild(c);this.g=L(bd,{width:d.width,height:d.height});T(this.g,m);this.element.appendChild(this.g);
this.popup=b?b:new U(this);d=new cd;d.init(this.g,this);this.pa.push(d);this.Z=d;this.editor=new V(this);this.k=new dd(c,this.popup,this);this.hb=new ed(this,this.element);var f=this;y(this.element,"mouseover",function(a){a=a.relatedTarget;if(!a||!fc(f.element,a))f.j.fireEvent(fd),Nb(c,"annotorious-item-unfocus","annotorious-item-focus")});y(this.element,"mouseout",function(a){a=a.relatedTarget;if(!a||!fc(f.element,a))f.j.fireEvent(gd),Nb(c,"annotorious-item-focus","annotorious-item-unfocus")});y(c,
"mousedown",function(a){f.pb&&(T(f.g,k),f.k.l(h),f.Z.startSelection(a.offsetX,a.offsetY))});this.j.f(hd,function(a){a=a.viewportBounds;f.editor.V({x:a.left+f.O.offsetLeft,y:a.bottom+4+f.O.offsetTop});f.editor.open()});this.j.f(id,function(){T(f.g,m);f.Z.stopSelection()})}
function ad(a,b){function c(c,d){Q(b,"margin-"+c,d+"px");Q(a,"margin-"+c,0);Q(a,"padding-"+c,0)}var d=Yc(a,"margin"),f=Yc(a,"padding");(0!=d.top||0!=f.top)&&c("top",d.top+f.top);(0!=d.right||0!=f.right)&&c("right",d.right+f.right);(0!=d.bottom||0!=f.bottom)&&c("bottom",d.bottom+f.bottom);(0!=d.left||0!=f.left)&&c("left",d.left+f.left)}r=Zc.prototype;
r.tb=function(a){this.k.n(a);var b=B(this.pa,function(b){return b.getSupportedShapeType()==a.shapes[0].type});if(b){T(this.g,k);this.k.l(h);var c=this.g.getContext("2d"),d=a.shapes[0],f=this,d="pixel"==d.units?d:Aa(d,function(a){return f.sa(a)});b.drawShape(c,d)}b=ya(a.shapes[0]).geometry;b="pixel"==a.shapes[0].units?{x:b.x,y:b.y+b.height}:this.sa({x:b.x,y:b.y+b.height});this.editor.V({x:b.x+this.O.offsetLeft,y:b.y+4+this.O.offsetTop});this.editor.open(a)};r.o=function(a,b){this.k.o(a,b)};
r.f=function(a,b){this.j.f(a,b)};r.ba=function(a){a.init(this,this.g);this.pa.push(a)};r.fireEvent=function(a,b){this.j.fireEvent(a,b)};r.sa=function(a){var b=Uc(this.O);return{x:a.x*b.width,y:a.y*b.height}};r.R=aa("Z");r.C=function(){return this.k.C()};r.S=aa("pa");r.getItem=function(){return{src:jd(this.O)}};function jd(a){var b=a.getAttribute("data-original");return b?b:a.src}r.l=function(a){this.k.l(a)};r.n=function(a){this.k.n(a)};r.ea=function(a,b){this.j.ea(a,b)};
r.ga=function(a){(this.Z=B(this.pa,function(b){return b.getName()==a}))||console.log('WARNING: selector "'+a+'" not available')};r.W=function(a){this.pb=a;a||(a=this.hb,a.Ka(),delete a.mb,delete a.lb,delete a.Ra,delete a.Qa,(a=a.element)&&a.parentNode&&a.parentNode.removeChild(a),delete this.hb)};r.stopSelection=function(a){T(this.g,m);this.Z.stopSelection();a&&this.k.o(a)};r.Ea=function(a){var b=Uc(this.O);return{x:a.x/b.width,y:a.y/b.height}};Zc.prototype.fireEvent=Zc.prototype.fireEvent;
Zc.prototype.toItemCoordinates=Zc.prototype.Ea;function Ea(a,b){this.N={};this.m=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var f;if(a instanceof Ea)kd(a),f=a.m.concat(),d=Na(a);else{var c=[],e=0;for(f in a)c[e++]=f;f=c;c=[];e=0;for(d in a)c[e++]=a[d];d=c}for(c=0;c<f.length;c++)this.set(f[c],d[c])}}Ea.prototype.r=0;function Na(a){kd(a);for(var b=[],c=0;c<a.m.length;c++)b.push(a.N[a.m[c]]);return b}
Ea.prototype.clear=function(){this.N={};this.r=this.m.length=0};function kd(a){if(a.r!=a.m.length){for(var b=0,c=0;b<a.m.length;){var d=a.m[b];Object.prototype.hasOwnProperty.call(a.N,d)&&(a.m[c++]=d);b++}a.m.length=c}if(a.r!=a.m.length){for(var f={},c=b=0;b<a.m.length;)d=a.m[b],Object.prototype.hasOwnProperty.call(f,d)||(a.m[c++]=d,f[d]=1),b++;a.m.length=c}}Ea.prototype.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.N,a)?this.N[a]:b};
Ea.prototype.set=function(a,b){Object.prototype.hasOwnProperty.call(this.N,a)||(this.r++,this.m.push(a));this.N[a]=b};function ld(){}qa(ld,Ca);ld.prototype.Xa=function(a){return jd(a)};ld.prototype.init=function(){Da(this,M("img.annotatable",document))};ld.prototype.Bb=function(a){return new Zc(a)};ld.prototype.cb=function(a){return dc(a)?"IMG"==a.tagName:m};function dd(a,b,c){this.G=a;this.A=b;this.e=c;this.X=[];this.P=[];this.w=this.G.getContext("2d");this.aa=k;this.Na=m;var d=this;y(this.G,"mousemove",function(a){if(d.aa){var b=md(d,a.offsetX,a.offsetY);b?(d.Na=m,d.c?d.c!=b&&(d.aa=m,W(d.A)):(d.c=b,nd(d),d.e.fireEvent(od,{Q:d.c,mouseEvent:a}))):!d.Na&&d.c&&(d.aa=m,W(d.A))}else d.ha=a});c.f(gd,function(){delete d.c;d.aa=k});c.f(pd,function(){if(!d.aa&&d.ha){var a=d.c;d.c=md(d,d.ha.offsetX,d.ha.offsetY);d.aa=k;a!=d.c?(nd(d),d.e.fireEvent(qd,{Q:a,mouseEvent:d.ha}),
d.e.fireEvent(od,{Q:d.c,mouseEvent:d.ha})):d.c&&rd(d.A)}else nd(d)})}dd.prototype.o=function(a,b){b&&(b==this.c&&delete this.c,z(this.X,b),delete this.P[Ba(b.shapes[0])]);this.X.push(a);var c=a.shapes[0];if("pixel"!=c.units)var d=this,c=Aa(c,function(a){return d.e.sa(a)});this.P[Ba(a.shapes[0])]=c;nd(this)};dd.prototype.n=function(a){a==this.c&&delete this.c;z(this.X,a);delete this.P[Ba(a.shapes[0])];nd(this)};dd.prototype.C=function(){return ab(this.X)};
dd.prototype.l=function(a){(this.c=a)?this.Na=k:W(this.A);nd(this)};function md(a,b,c){a=sd(a,b,c);if(0<a.length)return a[0]}
function sd(a,b,c){var d=[];x(a.X,function(f){var e;e=a.P[Ba(f.shapes[0])];if("rect"==e.type)e=b<e.geometry.x||c<e.geometry.y||b>e.geometry.x+e.geometry.width||c>e.geometry.y+e.geometry.height?m:k;else if("polygon"==e.type){e=e.geometry.points;for(var g=m,j=e.length-1,i=0;i<e.length;i++)e[i].y>c!=e[j].y>c&&b<(e[j].x-e[i].x)*(c-e[i].y)/(e[j].y-e[i].y)+e[i].x&&(g=!g),j=i;e=g}else e=m;e&&d.push(f)});db(d,function(a,b){return xa(a.shapes[0])>xa(b.shapes[0])});return d}
function td(a,b,c){var d=B(a.e.S(),function(a){return a.getSupportedShapeType()==b.type});d?d.drawShape(a.w,b,c):console.log("WARNING unsupported shape type: "+b.type)}function nd(a){a.w.clearRect(0,0,a.G.width,a.G.height);x(a.X,function(b){td(a,a.P[Ba(b.shapes[0])])});if(a.c){var b=a.P[Ba(a.c.shapes[0])];td(a,b,k);b=ya(b).geometry;a.A.show(a.c,{x:b.x,y:b.y+b.height+5})}};var ud={};
function vd(a){this.L=a;this.H=a.div;var b=parseInt(R(this.H,"width")),c=parseInt(R(this.H,"height"));this.j=new $c;this.element=Zb("div","annotorious-annotationlayer");Q(this.element,"position","relative");Tc(this.element,b,c);cc(this.element,this.H);this.element.appendChild(this.H);new ed(this,this.element,"Hold CTRL to Annotate");var d=L(wd,{ab:"Click and Drag"});Q(d,"z-index",9998);S(d,0);this.element.appendChild(d);this.popup=new U(this);this.k=new xd(a,this.popup,this);this.g=L(bd,{width:b,
height:c});T(this.g,m);Q(this.g,"z-index",9999);this.element.appendChild(this.g);this.oa=new cd;this.oa.init(this.g,this);this.editor=new V(this);Q(this.editor.element,"z-index",1E4);var f=this;y(this.element,"mouseover",function(a){a=a.relatedTarget;(!a||!fc(f.element,a))&&f.j.fireEvent(fd)});y(this.element,"mouseout",function(a){a=a.relatedTarget;(!a||!fc(f.element,a))&&f.j.fireEvent(gd)});y(document,"keydown",function(a){17==a.keyCode&&(S(d,0.8),T(f.g,k),window.setTimeout(function(){S(d,0)},2E3))});
y(this.g,"mousedown",function(a){var b=Sc(f.H);f.oa.startSelection(a.clientX-b.x,a.clientY-b.y)});this.j.f(hd,function(a){a=a.viewportBounds;f.editor.V({x:a.left+f.H.offsetLeft,y:a.bottom+4+f.H.offsetTop});f.editor.open()});this.j.f(id,function(){f.stopSelection()})}r=vd.prototype;
r.tb=function(a){this.k.n(a);var b=this.oa,c=this;if(b){T(this.g,k);this.k.l(h);var d=this.g.getContext("2d"),f=Aa(a.shapes[0],function(a){return c.sa(a)});b.drawShape(d,f);b=ya(f).geometry;this.editor.V({x:b.x+this.H.offsetLeft,y:b.y+b.height+4+this.H.offsetTop});this.editor.open(a)}};r.o=function(a){this.k.o(a)};r.f=function(a,b){this.j.f(a,b)};r.ba=o();r.fireEvent=function(a,b){this.j.fireEvent(a,b)};
r.sa=function(a){a=this.L.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return{x:a.x,y:a.y}};r.R=aa("oa");r.C=o();r.S=o();r.getItem=function(){return{src:"map://openlayers/something"}};r.l=function(a){this.k.l(a)};r.n=function(a){this.k.n(a)};r.ea=function(a,b){this.j.ea(a,b)};r.ga=o();r.W=o();r.stopSelection=function(a){T(this.g,m);this.oa.stopSelection();a&&this.k.o(a)};r.Ea=function(a){a=this.L.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return{x:a.lon,y:a.lat}};function yd(){}qa(yd,Ca);yd.prototype.Xa=function(){return"map://openlayers/something"};yd.prototype.init=function(){Da(this)};yd.prototype.Bb=function(a){return new vd(a)};yd.prototype.cb=function(a){return a instanceof OpenLayers.Map};function xd(a,b,c){this.L=a;this.A=b;Q(this.A.element,"z-index",99E3);this.la=[];this.Ga=new OpenLayers.Layer.Boxes("Annotorious");this.L.addLayer(this.Ga);var d=this;this.L.events.register("move",this.L,function(){if(d.$){var a=d.$.ta.div,b=Rc(a,d.L.div),a=parseInt(a.style[Ya("height")]||"",10);d.A.V({x:b.x,y:b.y+a+5})}});c.f(pd,function(){d.Oa==d.$?rd(d.A):Dd(d,d.Oa,d.$)})}
function Dd(a,b,c){if(b){var d=Rc(b.ta.div,a.L.div),f=parseInt(b.ta.div.style[Ya("height")]||"",10);Q(b.xb,"border-color","#fff000");a.A.show(b.Q,{x:d.x,y:d.y+f+5});a.$=b}else delete a.$;c&&Q(c.xb,"border-color","#fff")}
xd.prototype.o=function(a){var b=a.shapes[0].geometry,b=new OpenLayers.Marker.Box(new OpenLayers.Bounds(b.x,b.y,b.x+b.width,b.y+b.height));Jb(b.div,"annotorious-ol-boxmarker-outer");Q(b.div,"border",l);var c=Zb("div","annotorious-ol-boxmarker-inner");Tc(c,"100%","100%");b.div.appendChild(c);var d={Q:a,ta:b,xb:c},f=this;y(c,"mouseover",function(){f.$||Dd(f,d);f.Oa=d});y(c,"mouseout",function(){delete f.Oa;W(f.A)});this.la.push(d);db(this.la,function(a,b){return xa(b.Q.shapes[0])-xa(a.Q.shapes[0])});
var e=1E4;x(this.la,function(a){Q(a.ta.div,"z-index",e);e++});this.Ga.addMarker(b)};xd.prototype.n=function(a){var b=B(this.la,function(b){return b.Q==a});b&&(z(this.la,b),this.Ga.removeMarker(b.ta))};xd.prototype.C=o();xd.prototype.l=function(a){a||W(this.A)};function cd(){}r=cd.prototype;r.init=function(a,b){this.G=a;this.e=b;this.w=a.getContext("2d");this.w.lineWidth=1;this.La=m};
r.Fa=function(){var a=this;this.Pa=y(this.G,"mousemove",function(b){if(a.La){a.z={x:b.offsetX,y:b.offsetY};a.w.clearRect(0,0,a.G.width,a.G.height);var b=a.z.x-a.d.x,c=a.z.y-a.d.y;a.w.strokeStyle="#000000";a.w.strokeRect(a.d.x+0.5,a.d.y+0.5,b,c);a.w.strokeStyle="#ffffff";0<b&&0<c?a.w.strokeRect(a.d.x+1.5,a.d.y+1.5,b-2,c-2):0<b&&0>c?a.w.strokeRect(a.d.x+1.5,a.d.y-0.5,b-2,c+2):0>b&&0>c?a.w.strokeRect(a.d.x-0.5,a.d.y-0.5,b+2,c+2):a.w.strokeRect(a.d.x-0.5,a.d.y+1.5,b+2,c-2)}});this.nb=y(this.G,"mouseup",
function(b){a.La=m;var c=a.getShape();c?a.e.fireEvent(hd,{mouseEvent:b,shape:c,viewportBounds:a.getViewportBounds()}):a.e.fireEvent(id)})};r.Ka=function(){this.Pa&&(Ia(this.Pa),delete this.Pa);this.nb&&(Ia(this.nb),delete this.Ub)};r.getName=function(){return"rect_drag"};r.getSupportedShapeType=function(){return"rect"};r.startSelection=function(a,b){this.La=k;this.Fa();this.d=new ra(a,b);this.e.fireEvent(Ed,{offsetX:a,offsetY:b});Q(document.body,"-webkit-user-select","none")};
r.stopSelection=function(){this.Ka();this.w.clearRect(0,0,this.G.width,this.G.height);Q(document.body,"-webkit-user-select","auto");delete this.z};r.getShape=function(){if(this.z&&3<Math.abs(this.z.x-this.d.x)&&3<Math.abs(this.z.y-this.d.y)){var a=this.getViewportBounds(),b=this.e.Ea({x:a.left,y:a.top}),a=this.e.Ea({x:a.right-1,y:a.bottom-1});return new wa("rect",new va(b.x,b.y,a.x-b.x,a.y-b.y))}};
r.getViewportBounds=function(){var a,b;this.z.x>this.d.x?(a=this.z.x,b=this.d.x):(a=this.d.x,b=this.z.x);var c,d;this.z.y>this.d.y?(c=this.d.y,d=this.z.y):(c=this.z.y,d=this.d.y);return{top:c,right:a,bottom:d,left:b}};r.drawShape=function(a,b,c){if("rect"==b.type){var d;c?(c="#fff000",d=1.2):(c="#ffffff",d=1);b=b.geometry;a.strokeStyle="#000000";a.lineWidth=d;a.strokeRect(b.x+0.5,b.y+0.5,b.width+1,b.height+1);a.strokeStyle=c;a.strokeRect(b.x+1.5,b.y+1.5,b.width-1,b.height-1)}};function Fd(a,b,c){this.src=a;this.text=b;this.shapes=[c];this.context=document.URL};function Gd(a){window.addEventListener?window.addEventListener("load",a):window.attachEvent&&window.attachEvent("onload",a)};function X(){this.I=[new ld];ud&&this.I.push(new yd);this.ma=[];var a=this;Gd(function(){x(a.I,function(a){a.init()});x(a.ma,function(b){b.initPlugin&&b.initPlugin(a);x(a.I,function(a){a.Ta(b)})})})}function Y(a,b){return B(a.I,function(a){return A(a,b)})}r=X.prototype;r.o=function(a,b){var c=Y(this,a.src);c&&c.o(a,b)};r.f=function(a,b){x(this.I,function(c){c.f(a,b)})};r.Ta=function(a,b){try{this.ma.push(new window.annotorious.plugin[a](b))}catch(c){console.log("Could not load plugin: "+a)}};
r.R=function(a){var b=Y(this,a);if(b)return b.R(a)};r.C=function(a){if(a){var b=Y(this,a);return b?b.C(a):[]}var c=[];x(this.I,function(a){Fa(c,a.C())});return c};r.S=function(a){var b=Y(this,a);if(b)return b.S(a)};r.l=function(a){if(a){var b=Y(this,a.src);b&&b.l(a)}else x(this.I,function(a){a.l()})};r.Za=function(a){var b=B(this.I,function(b){return b.cb(a)});if(b)b.Za(a);else throw"Error: Annotorious does not support this media type in the current version or build configuration.";};
r.Sb=function(a){var b=this;x(this.C(a),function(a){b.n(a)})};r.n=function(a){var b=Y(this,a.src);b&&b.n(a)};r.ba=function(a,b){var c=Y(this,a);c&&c.ba(a,b)};r.ga=function(a,b){var c=Y(this,a);c&&c.ga(a,b)};r.W=function(a){x(this.I,function(b){b.W(a)})};window.anno=new X;X.prototype.addAnnotation=X.prototype.o;X.prototype.addHandler=X.prototype.f;X.prototype.addPlugin=X.prototype.Ta;X.prototype.addSelector=X.prototype.ba;X.prototype.getActiveSelector=X.prototype.R;X.prototype.getAnnotations=X.prototype.C;
X.prototype.getAvailableSelectors=X.prototype.S;X.prototype.highlightAnnotation=X.prototype.l;X.prototype.makeAnnotatable=X.prototype.Za;X.prototype.removeAll=X.prototype.Sb;X.prototype.removeAnnotation=X.prototype.n;X.prototype.setActiveSelector=X.prototype.ga;X.prototype.setSelectionEnabled=X.prototype.W;var Hd;(Hd="ScriptEngine"in s&&"JScript"==s.ScriptEngine())&&(s.ScriptEngineMajorVersion(),s.ScriptEngineMinorVersion(),s.ScriptEngineBuildVersion());function Z(a,b){this.B=Hd?[]:"";a!=l&&this.append.apply(this,arguments)}Z.prototype.set=function(a){this.clear();this.append(a)};Hd?(Z.prototype.Va=0,Z.prototype.append=function(a,b,c){b==l?this.B[this.Va++]=a:(this.B.push.apply(this.B,arguments),this.Va=this.B.length);return this}):Z.prototype.append=function(a,b,c){this.B+=a;if(b!=l)for(var d=1;d<arguments.length;d++)this.B+=arguments[d];return this};Z.prototype.clear=function(){Hd?this.Va=this.B.length=0:this.B=""};
Z.prototype.toString=function(){if(Hd){var a=this.B.join("");this.clear();a&&this.append(a);return a}return this.B};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

 // Copyright (C) 2006 Google Inc.
 //
 // Licensed under the Apache License, Version 2.0 (the "License");
 // you may not use this file except in compliance with the License.
 // You may obtain a copy of the License at
 //
 //      http://www.apache.org/licenses/LICENSE-2.0
 //
 // Unless required by applicable law or agreed to in writing, software
 // distributed under the License is distributed on an "AS IS" BASIS,
 // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 // See the License for the specific language governing permissions and
 // limitations under the License.

*/
function Id(){}
var Jd={Zb:"<",Yb:">",Vb:"&",$b:"\u00a0",bc:'"',Wb:"'"},$={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,
ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},Kd=/&/g,Ld=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,Md=/</g,Nd=/>/g,Od=/\"/g,Pd=/=/g,Qd=/\0/g,Rd=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,Sd=/^#(\d+)$/,Td=/^#x([0-9A-Fa-f]+)$/,Ud=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)",
"i"),Vd=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?--\>|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");
Id.prototype.parse=function(a,b){var c=l,d=m,f=[],e,g,j;a.D=[];for(a.M=m;b;){var i=b.match(d?Ud:Vd),b=b.substring(i[0].length);if(d)if(i[1]){var n=i[1].toLowerCase();if(i[2]){i=i[3];switch(i.charCodeAt(0)){case 34:case 39:i=i.substring(1,i.length-1)}i=i.replace(Qd,"").replace(Rd,ka(this.Qb,this))}else i=n;f.push(n,i)}else i[4]&&(g!==h&&(j?a.Fb&&a.Fb(e,f):a.ub&&a.ub(e)),j&&g&12&&(c=c===l?b.toLowerCase():c.substring(c.length-b.length),d=c.indexOf("</"+e),0>d&&(d=b.length),g&4?a.rb&&a.rb(b.substring(0,
d)):a.Db&&a.Db(b.substring(0,d).replace(Ld,"&amp;$1").replace(Md,"&lt;").replace(Nd,"&gt;")),b=b.substring(d)),e=g=j=h,f.length=0,d=m);else if(i[1])Wd(a,i[0]);else if(i[3])j=!i[2],d=k,e=i[3].toLowerCase(),g=$.hasOwnProperty(e)?$[e]:h;else if(i[4])Wd(a,i[4]);else if(i[5])switch(i[5]){case "<":Wd(a,"&lt;");break;case ">":Wd(a,"&gt;");break;default:Wd(a,"&amp;")}}for(c=a.D.length;0<=--c;)a.K.append("</",a.D[c],">");a.D.length=0};
Id.prototype.Qb=function(a){a=a.toLowerCase();if(Jd.hasOwnProperty(a))return Jd[a];var b=a.match(Sd);return b?String.fromCharCode(parseInt(b[1],10)):(b=a.match(Td))?String.fromCharCode(parseInt(b[1],16)):""};function Xd(){};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

 // Copyright (C) 2006 Google Inc.
 //
 // Licensed under the Apache License, Version 2.0 (the "License");
 // you may not use this file except in compliance with the License.
 // You may obtain a copy of the License at
 //
 //      http://www.apache.org/licenses/LICENSE-2.0
 //
 // Unless required by applicable law or agreed to in writing, software
 // distributed under the License is distributed on an "AS IS" BASIS,
 // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 // See the License for the specific language governing permissions and
 // limitations under the License.

*/
function Yd(a,b){var c=new Z;(new Id).parse(new Zd(c,b,h),a);return c.toString()}function Zd(a,b,c){this.K=a;this.D=[];this.M=m;this.Hb=b;this.Ba=c}qa(Zd,Xd);
var $d={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,
"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,
"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,
"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,
"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,
"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};
Zd.prototype.Fb=function(a,b){if(!this.M&&$.hasOwnProperty(a)){var c=$[a];if(!(c&32))if(c&16)this.M=!(c&2);else{for(var d=b,f=0;f<d.length;f+=2){var e=d[f],g=d[f+1],j=l,i;if((i=a+"::"+e,$d.hasOwnProperty(i))||(i="*::"+e,$d.hasOwnProperty(i)))j=$d[i];if(j!==l)switch(j){case 0:break;case 2:case 3:g=l;break;case 4:case 5:case 6:case 7:case 8:case 9:g=this.Ba?this.Ba(g):g;break;case 1:g=this.Hb&&this.Hb(g);break;case 11:g&&"#"===g.charAt(0)?(g=this.Ba?this.Ba(g):g)&&(g="#"+g):g=l;break;default:g=l}else g=
l;d[f+1]=g}if(b=d){c&2||this.D.push(a);this.K.append("<",a);c=0;for(d=b.length;c<d;c+=2)f=b[c],e=b[c+1],e!==l&&e!==h&&this.K.append(" ",f,'="',e.replace(Kd,"&amp;").replace(Md,"&lt;").replace(Nd,"&gt;").replace(Od,"&#34;").replace(Pd,"&#61;"),'"');this.K.append(">")}}}};
Zd.prototype.ub=function(a){if(this.M)this.M=m;else if($.hasOwnProperty(a)){var b=$[a];if(!(b&50)){if(b&1)for(b=this.D.length;0<=--b;){var c=this.D[b];if(c===a)break;if(!($[c]&1))return}else for(b=this.D.length;0<=--b&&!(this.D[b]===a););if(!(0>b)){for(var d=this.D.length;--d>b;)c=this.D[d],$[c]&1||this.K.append("</",c,">");this.D.length=b;this.K.append("</",a,">")}}}};function Wd(a,b){a.M||a.K.append(b)}Zd.prototype.Db=function(a){this.M||this.K.append(a)};Zd.prototype.rb=function(a){this.M||this.K.append(a)};function V(a){this.element=L(ae);this.e=a;this.Kb=a.getItem();this.qa=M(".annotorious-editor-text",this.element)[0];this.Ib=M(".annotorious-editor-button-cancel",this.element)[0];this.fb=M(".annotorious-editor-button-save",this.element)[0];this.Jb=ec(this.fb);this.ia=[];var b=this;y(this.Ib,"click",function(c){c.preventDefault();a.stopSelection(b.ob);b.close()});y(this.fb,"click",function(c){c.preventDefault();c=b.vb();a.o(c);a.stopSelection();b.ob?a.fireEvent(be,c):a.fireEvent(ce,c);b.close()});
T(this.element,m);a.element.appendChild(this.element);this.qa.focus()}r=V.prototype;r.Sa=function(a){var b=Zb("div","annotorious-editor-field");u(a)?b.innerHTML=a:ea(a)?this.ia.push({t:b,Wa:a}):dc(a)&&b.appendChild(a);a=this.Jb;a.parentNode&&a.parentNode.insertBefore(b,a)};r.open=function(a){if(this.ua=this.ob=a)this.qa.value=a.text;T(this.element,k);this.qa.focus();x(this.ia,function(b){var c=b.Wa(a);u(c)?b.t.innerHTML=c:dc(c)&&(bc(b.t),b.t.appendChild(c))})};
r.close=function(){T(this.element,m);this.qa.value=""};r.V=function(a){Mc(this.element,a.x,a.y)};r.vb=function(){var a=Yd(this.qa.value,function(a){return a});this.ua?this.ua.text=a:this.ua=new Fd(this.Kb.src,a,this.e.R().getShape());return this.ua};V.prototype.addField=V.prototype.Sa;V.prototype.getAnnotation=V.prototype.vb;function $c(){this.ja=[]}$c.prototype.f=function(a,b){this.ja[a]||(this.ja[a]=[]);this.ja[a].push(b)};$c.prototype.ea=function(a,b){var c=this.ja[a];c&&z(c,b)};$c.prototype.fireEvent=function(a,b){var c=this.ja[a];c&&x(c,function(a){a(b)})};var fd="onMouseOverItem",gd="onMouseOutOfItem",od="onMouseOverAnnotation",qd="onMouseOutOfAnnotation",Ed="onSelectionStarted",id="onSelectionCanceled",hd="onSelectionCompleted",pd="beforePopupHide",ce="onAnnotationCreated",be="onAnnotationUpdated",de={};function ed(a,b,c){var d=this;c||(c="Click and Drag to Annotate");this.element=L(ee,{ab:c});this.e=a;this.kb=M(".annotorious-hint-msg",this.element)[0];this.ib=M(".annotorious-hint-icon",this.element)[0];this.Ra=function(){d.show()};this.Qa=function(){fe(d)};this.Fa();fe(this);b.appendChild(this.element)}
ed.prototype.Fa=function(){var a=this;this.mb=y(this.ib,"mouseover",function(){a.show();window.clearTimeout(a.Ma)});this.lb=y(this.ib,"mouseout",function(){fe(a)});this.e.f(fd,this.Ra);this.e.f(gd,this.Qa)};ed.prototype.Ka=function(){Ia(this.mb);Ia(this.lb);this.e.ea(fd,this.Ra);this.e.ea(gd,this.Qa)};ed.prototype.show=function(){window.clearTimeout(this.Ma);S(this.kb,0.8);var a=this;this.Ma=window.setTimeout(function(){fe(a)},3E3)};function fe(a){window.clearTimeout(a.Ma);S(a.kb,0)};window.annotorious||(window.annotorious={});window.annotorious.plugin||(window.annotorious.plugin={});function U(a){this.element=L(ge);this.e=a;this.Lb=M(".annotorious-popup-text",this.element)[0];this.F=M(".annotorious-popup-buttons",this.element)[0];this.Ja=m;this.ia=[];var b=M(".annotorious-popup-button-edit",this.F)[0],c=M(".annotorious-popup-button-delete",this.F)[0],d=this;y(b,"mouseover",function(){Jb(b,"annotorious-popup-button-active")});y(b,"mouseout",function(){Lb(b,"annotorious-popup-button-active")});y(b,"click",function(){S(d.element,0);Q(d.element,"pointer-events","none");a.tb(d.c)});
y(c,"mouseover",function(){Jb(c,"annotorious-popup-button-active")});y(c,"mouseout",function(){Lb(c,"annotorious-popup-button-active")});y(c,"click",function(){S(d.element,0);Q(d.element,"pointer-events","none");a.fireEvent("onAnnotationRemoved",d.c);a.n(d.c)});y(this.element,"mouseover",function(){window.clearTimeout(d.Ia);0.9>(d.F.style[Ya("opacity")]||"")&&S(d.F,0.9);rd(d)});y(this.element,"mouseout",function(){S(d.F,0);W(d)});a.f(de.Tb,function(){W(d)});S(this.F,0);S(this.element,0);Q(this.element,
"pointer-events","none");a.element.appendChild(this.element)}U.prototype.Sa=function(a){var b=Zb("div","annotorious-popup-field");u(a)?b.innerHTML=a:ea(a)?this.ia.push({t:b,Wa:a}):dc(a)&&b.appendChild(a);this.element.appendChild(b)};function W(a){a.Ja=m;a.na||(a.na=window.setTimeout(function(){a.e.fireEvent(pd,a);a.Ja||(S(a.element,0),Q(a.element,"pointer-events","none"),S(a.F,0.9),delete a.na)},300))}function rd(a){a.Ja=k;a.na&&(window.clearTimeout(a.na),delete a.na)}
U.prototype.show=function(a,b){rd(this);if(a&&b){this.c=a;this.Lb.innerHTML=a.text?a.text.replace(/\n/g,"<br/>"):'<span class="annotorious-popup-empty">No comment</span>';"editable"in a&&a.editable==m?T(this.F,m):T(this.F,k);this.V(b);this.Ia&&window.clearTimeout(this.Ia);S(this.F,0.9);var c=this;this.Ia=window.setTimeout(function(){S(c.F,0)},1E3);x(this.ia,function(b){var c=b.Wa(a);u(c)?b.t.innerHTML=c:dc(c)&&(bc(b.t),b.t.appendChild(c))})}S(this.element,0.9);Q(this.element,"pointer-events","auto")};
U.prototype.V=function(a){Mc(this.element,new Ob(a.x,a.y))};U.prototype.addField=U.prototype.Sa;G&&K(8);function he(a){return"object"===typeof a&&a&&0===a.Xb?a.content:(""+a).replace(ie,je)}var ke={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\u000c":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function je(a){return ke[a]}var ie=/[\x00\x22\x26\x27\x3c\x3e]/g;function ge(){return'<div class="annotorious-popup" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Edit" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>'}
function ae(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Add a Comment..." tabindex="1"></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3">Cancel</a><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2">Save</a></div></form></div>'};function bd(a){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+he(a.width)+"px; height:"+he(a.height)+'px; z-index:0" width="'+he(a.width)+'" height="'+he(a.height)+'"></canvas>'}
function ee(a){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">'+he(a.ab)+'</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'};function wd(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint annotorious-ol-hint-secondary" style="width: 400px; margin:0px auto;">'+he(a.ab)+"</dvi></div>"};
