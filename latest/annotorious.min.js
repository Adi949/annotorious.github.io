var h=void 0,k=!0,l=null,m=!1;function n(){return function(){}}function aa(a){return function(){return this[a]}}function ba(a){return function(){return a}}var r,s=this;function ca(a,b){var c=a.split("."),d=s;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var f;c.length&&(f=c.shift());)!c.length&&b!==h?d[f]=b:d=d[f]?d[f]:d[f]={}}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return"array"==da(a)}function fa(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function t(a){return"string"==typeof a}function ga(a){return"function"==da(a)}function ha(a){var b=typeof a;return"object"==b&&a!=l||"function"==b}var ia="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ja=0;function ka(a,b,c){return a.call.apply(a.bind,arguments)}
function la(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function qa(a,b,c){qa=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ka:la;return qa.apply(l,arguments)}
function ra(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}function sa(a,b){function c(){}c.prototype=b.prototype;a.Qb=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ta(a,b){this.x=a;this.y=b};function ua(a){this.aa=a}function va(a){for(var b=0,c=a.length-1,d=0;d<a.length;d++)b+=(a[c].x+a[d].x)*(a[c].y-a[d].y),c=d;return b/2}
function wa(a,b){var c,d;d=c=0;for(var f,e=a.length-1,g=0;g<a.length;g++)f=a[g].x*a[e].y-a[e].x*a[g].y,c+=(a[g].x+a[e].x)*f,d+=(a[g].y+a[e].y)*f,e=g;f=6*va(a);c=Math.abs(c/f);d=Math.abs(d/f);f=[];for(e=0;e<a.length;e++){var g=a[e],j=(0>va(a)?-1:1)*b,i=g.x-c,o=g.y-d,x=0<j?1:0>j?-1:0,j=Math.sqrt(Math.pow(j,2)/(1+Math.pow(i/o,2)));f.push({x:g.x+Math.abs(i/o*j)*(0<i?1:0>i?-1:0)*x,y:g.y+Math.abs(j)*(0<o?1:0>o?-1:0)*x})}return f};function xa(a,b,c,d){0<c?(this.x=a,this.width=c):(this.x=a+c,this.width=-c);0<d?(this.y=b,this.height=d):(this.y=b+d,this.height=-d)};function ya(a,b){this.type=a;this.geometry=b}function za(a){return"rect"==a.type?a.geometry.width*a.geometry.height:"polygon"==a.type?Math.abs(va(a.geometry.aa)):0}function Aa(a){if("rect"==a.type)return a;if("polygon"==a.type){for(var a=a.geometry.aa,b=a[0].x,c=a[0].x,d=a[0].y,f=a[0].y,e=1;e<a.length;e++)a[e].x>c&&(c=a[e].x),a[e].x<b&&(b=a[e].x),a[e].y>f&&(f=a[e].y),a[e].y<d&&(d=a[e].y);return new ya("rect",new xa(b,d,c-b,f-d))}}
function Ba(a,b){if("rect"==a.type){var c=a.geometry,d=b({x:c.x,y:c.y}),c=b({x:c.x+c.width,y:c.y+c.height});return new ya("rect",new xa(d.x,d.y,c.x-d.x,c.y-d.y))}if("polygon"==a.type){var f=[];u(a.geometry.aa,function(a){f.push(b(a))});return new ya("polygon",new ua(f))}}function Ca(a){return JSON.stringify(a.geometry)};function Da(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function Ea(a){if(!Ia.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Ja,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Ka,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(La,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ma,"&quot;"));return a}var Ja=/&/g,Ka=/</g,La=/>/g,Ma=/\"/g,Ia=/[&<>\"]/,Na={};function Oa(a){return Na[a]||(Na[a]=(""+a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()}))};var w=Array.prototype,Pa=w.indexOf?function(a,b,c){return w.indexOf.call(a,b,c)}:function(a,b,c){c=c==l?0:0>c?Math.max(0,a.length+c):c;if(t(a))return!t(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},u=w.forEach?function(a,b,c){w.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=t(a)?a.split(""):a,e=0;e<d;e++)e in f&&b.call(c,f[e],e,a)},Qa=w.filter?function(a,b,c){return w.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=[],e=0,g=t(a)?a.split(""):
a,j=0;j<d;j++)if(j in g){var i=g[j];b.call(c,i,j,a)&&(f[e++]=i)}return f},Ra=w.map?function(a,b,c){return w.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,f=Array(d),e=t(a)?a.split(""):a,g=0;g<d;g++)g in e&&(f[g]=b.call(c,e[g],g,a));return f};function y(a,b){var c;a:{c=a.length;for(var d=t(a)?a.split(""):a,f=0;f<c;f++)if(f in d&&b.call(h,d[f],f,a)){c=f;break a}c=-1}return 0>c?l:t(a)?a.charAt(c):a[c]}function z(a,b){var c=Pa(a,b);0<=c&&w.splice.call(a,c,1)}
function Sa(a){return w.concat.apply(w,arguments)}function Ta(a){if(ea(a))return Sa(a);for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}function Ua(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c],f;if(ea(d)||(f=fa(d))&&d.hasOwnProperty("callee"))a.push.apply(a,d);else if(f)for(var e=a.length,g=d.length,j=0;j<g;j++)a[e+j]=d[j];else a.push(d)}}function Va(a,b,c,d){w.splice.apply(a,Wa(arguments,1))}
function Wa(a,b,c){return 2>=arguments.length?w.slice.call(a,b):w.slice.call(a,b,c)}function Xa(a,b){w.sort.call(a,b||Ya)}function Ya(a,b){return a>b?1:a<b?-1:0};var Za,$a,ab,db,eb;function fb(){return s.navigator?s.navigator.userAgent:l}function gb(){return s.navigator}db=ab=$a=Za=m;var hb;if(hb=fb()){var ib=gb();Za=0==hb.indexOf("Opera");$a=!Za&&-1!=hb.indexOf("MSIE");ab=!Za&&-1!=hb.indexOf("WebKit");db=!Za&&!ab&&"Gecko"==ib.product}var jb=Za,A=$a,B=db,C=ab,kb=gb();eb=-1!=(kb&&kb.platform||"").indexOf("Mac");var lb=!!gb()&&-1!=(gb().appVersion||"").indexOf("X11"),mb;
a:{var nb="",ob;if(jb&&s.opera)var pb=s.opera.version,nb="function"==typeof pb?pb():pb;else if(B?ob=/rv\:([^\);]+)(\)|;)/:A?ob=/MSIE\s+([^\);]+)(\)|;)/:C&&(ob=/WebKit\/(\S+)/),ob)var qb=ob.exec(fb()),nb=qb?qb[1]:"";if(A){var rb,sb=s.document;rb=sb?sb.documentMode:h;if(rb>parseFloat(nb)){mb=""+rb;break a}}mb=nb}var tb={};
function E(a){var b;if(!(b=tb[a])){b=0;for(var c=Da(""+mb).split("."),d=Da(""+a).split("."),f=Math.max(c.length,d.length),e=0;0==b&&e<f;e++){var g=c[e]||"",j=d[e]||"",i=RegExp("(\\d*)(\\D*)","g"),o=RegExp("(\\d*)(\\D*)","g");do{var x=i.exec(g)||["","",""],p=o.exec(j)||["","",""];if(0==x[0].length&&0==p[0].length)break;b=((0==x[1].length?0:parseInt(x[1],10))<(0==p[1].length?0:parseInt(p[1],10))?-1:(0==x[1].length?0:parseInt(x[1],10))>(0==p[1].length?0:parseInt(p[1],10))?1:0)||((0==x[2].length)<(0==
p[2].length)?-1:(0==x[2].length)>(0==p[2].length)?1:0)||(x[2]<p[2]?-1:x[2]>p[2]?1:0)}while(0==b)}b=tb[a]=0<=b}return b}var ub={};function vb(a){return ub[a]||(ub[a]=A&&!!document.documentMode&&document.documentMode>=a)};var wb,xb=!A||vb(9);!B&&!A||A&&vb(9)||B&&E("1.9.1");A&&E("9");var yb=A||jb||C;function zb(a){return(a=a.className)&&"function"==typeof a.split?a.split(/\s+/):[]}function Ab(a,b){var c=zb(a),d=Wa(arguments,1),d=Bb(c,d);a.className=c.join(" ");return d}function Cb(a,b){var c=zb(a),d=Wa(arguments,1);Fb(c,d);a.className=c.join(" ")}function Bb(a,b){for(var c=0,d=0;d<b.length;d++)0<=Pa(a,b[d])||(a.push(b[d]),c++);return c==b.length}function Fb(a,b){for(var c=0,d=0;d<a.length;d++)0<=Pa(b,a[d])&&(Va(a,d--,1),c++)}
function Gb(a,b,c){var d=zb(a);t(b)?z(d,b):ea(b)&&Fb(d,b);t(c)&&!(0<=Pa(d,c))?d.push(c):ea(c)&&Bb(d,c);a.className=d.join(" ")};function Hb(a,b){this.x=a!==h?a:0;this.y=b!==h?b:0};function Ib(a,b){this.width=a;this.height=b}Ib.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};Ib.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function Jb(a,b){for(var c in a)b.call(h,a[c],c,a)}var Kb="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Lb(a,b){for(var c,d,f=1;f<arguments.length;f++){d=arguments[f];for(c in d)a[c]=d[c];for(var e=0;e<Kb.length;e++)c=Kb[e],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Mb(a){return a?new Nb(Ob(a)):wb||(wb=new Nb)}function Pb(a,b){Jb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in Qb?a.setAttribute(Qb[d],b):0==d.lastIndexOf("aria-",0)?a.setAttribute(d,b):a[d]=b})}var Qb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function Rb(a){var b=!C?a.documentElement:a.body,a=a.parentWindow||a.defaultView;return new Hb(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}
function Sb(a,b,c){var d=arguments,f=document,e=d[0],g=d[1];if(!xb&&g&&(g.name||g.type)){e=["<",e];g.name&&e.push(' name="',Ea(g.name),'"');if(g.type){e.push(' type="',Ea(g.type),'"');var j={};Lb(j,g);g=j;delete g.type}e.push(">");e=e.join("")}e=f.createElement(e);g&&(t(g)?e.className=g:ea(g)?Ab.apply(l,[e].concat(g)):Pb(e,g));2<d.length&&Tb(f,e,d,2);return e}
function Tb(a,b,c,d){function f(c){c&&b.appendChild(t(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var e=c[d];fa(e)&&!(ha(e)&&0<e.nodeType)?u(Ub(e)?Ta(e):e,f):f(e)}}function Vb(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Wb(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)}function Xb(a){return ha(a)&&1==a.nodeType}function Yb(a){if(yb)return a.parentElement;a=a.parentNode;return Xb(a)?a:l}
function Zb(a,b){if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||Boolean(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Ob(a){return 9==a.nodeType?a:a.ownerDocument||a.document}function Ub(a){if(a&&"number"==typeof a.length){if(ha(a))return"function"==typeof a.item||"string"==typeof a.item;if(ga(a))return"function"==typeof a.item}return m}function Nb(a){this.Ba=a||s.document||document}r=Nb.prototype;
r.createElement=function(a){return this.Ba.createElement(a)};r.createTextNode=function(a){return this.Ba.createTextNode(a)};r.appendChild=function(a,b){a.appendChild(b)};r.append=function(a,b){Tb(Ob(a),a,arguments,1)};r.contains=Zb;function H(a,b){var c=Mb().createElement("DIV");c.innerHTML=a(b||$b,h,h);if(1==c.childNodes.length){var d=c.firstChild;if(1==d.nodeType)return d}return c}var $b={};function ac(){return k};/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

 The "New" BSD License:

 Copyright (c) 2005-2009, The Dojo Foundation
 All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
 list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
 this list of conditions and the following disclaimer in the documentation
 and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
 may be used to endorse or promote products derived from this software
 without specific prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
 FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
 DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
 CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
 OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
var I=function(){function a(a,c){if(!a)return[];if(a.constructor==Array)return a;if(!t(a))return[a];if(t(c)&&(c=t(c)?document.getElementById(c):c,!c))return[];var c=c||document,e=c.ownerDocument||c.documentElement;na=c.contentType&&"application/xml"==c.contentType||jb&&(c.doctype||"[object XMLDocument]"==e.toString())||!!e&&(A?e.xml:c.xmlVersion||e.xmlVersion);return(e=d(a)(c))&&e.Ua?e:b(e)}function b(a){if(a&&a.Ua)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;
O++;if(A&&na){var c=O+"";a[0].setAttribute("_zipIdx",c);for(var d=1,e;e=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(e),e.setAttribute("_zipIdx",c)}else if(A&&a.Yb)try{for(d=1;e=a[d];d++)bb(e)&&b.push(e)}catch(f){}else{a[0]&&(a[0]._zipIdx=O);for(d=1;e=a[d];d++)a[d]._zipIdx!=O&&b.push(e),e._zipIdx=O}return b}function c(a,b){if(!b)return 1;var c=yd(a);return!b[c]?b[c]=1:0}function d(a,b){if(rc){var c=sc[a];if(c&&!b)return c}if(c=tc[a])return c;var c=a.charAt(0),e=-1==a.indexOf(" ");0<=a.indexOf("#")&&
e&&(b=k);if(rc&&!b&&-1==">~+".indexOf(c)&&(!A||-1==a.indexOf(":"))&&!(uc&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var g=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return sc[a]=function(b){try{if(!(9==b.nodeType||e))throw"";var c=b.querySelectorAll(g);A?c.Yb=k:c.Ua=k;return c}catch(f){return d(a,k)(b)}}}var i=a.split(/\s*,\s*/);return tc[a]=2>i.length?f(a):function(a){for(var b=0,c=[],d;d=i[b++];)c=c.concat(f(d)(a));return c}}function f(a){var b=vc(Da(a));if(1==b.length){var c=
e(b[0]);return function(a){if(a=c(a,[]))a.Ua=k;return a}}return function(a){for(var a=Fa(a),c,d,f=b.length,g,ma,Db=0;Db<f;Db++){ma=[];c=b[Db];d=a.length-1;0<d&&(g={},ma.Ua=k);d=e(c);for(var i=0;c=a[i];i++)d(c,ma,g);if(!ma.length)break;a=ma}return ma}}function e(a){var b=wc[a.la];if(b)return b;var c=a.Hb,c=c?c.Va:"",d=o(a,{w:1}),e="*"==a.z,f=document.getElementsByClassName;if(c)f={w:1},e&&(f.z=1),d=o(a,f),"+"==c?b=i(d):"~"==c?b=j(d):">"==c&&(b=g(d));else if(a.id)d=!a.Kb&&e?ac:o(a,{w:1,id:1}),b=function(b,
c){var e;e=Mb(b);var f=a.id;if(f=(e=t(f)?e.Ba.getElementById(f):f)&&d(e))if(!(f=9==b.nodeType)){for(f=e.parentNode;f&&!(f==b);)f=f.parentNode;f=!!f}if(f)return Fa(e,c)};else if(f&&/\{\s*\[native code\]\s*\}/.test(""+f)&&a.J.length&&!uc)var d=o(a,{w:1,J:1,id:1}),p=a.J.join(" "),b=function(a,b){for(var c=Fa(0,b),e,f=0,g=a.getElementsByClassName(p);e=g[f++];)d(e,a)&&c.push(e);return c};else!e&&!a.Kb?b=function(b,c){for(var d=Fa(0,c),e,f=0,g=b.getElementsByTagName(a.kb());e=g[f++];)d.push(e);return d}:
(d=o(a,{w:1,z:1,id:1}),b=function(b,c){for(var e=Fa(0,c),f,g=0,xd=b.getElementsByTagName(a.kb());f=xd[g++];)d(f,b)&&e.push(f);return e});return wc[a.la]=b}function g(a){a=a||ac;return function(b,d,e){for(var f=0,g=b[xc];b=g[f++];)Ga(b)&&(!e||c(b,e))&&a(b,f)&&d.push(b);return d}}function j(a){return function(b,d,e){for(b=b[Ha];b;){if(Ga(b)){if(e&&!c(b,e))break;a(b)&&d.push(b)}b=b[Ha]}return d}}function i(a){return function(b,d,e){for(;b=b[Ha];)if(!cb||bb(b)){(!e||c(b,e))&&a(b)&&d.push(b);break}return d}}
function o(a,b){if(!a)return ac;var b=b||{},c=l;b.w||(c=oa(c,bb));b.z||"*"!=a.z&&(c=oa(c,function(b){return b&&b.tagName==a.kb()}));b.J||u(a.J,function(a,b){var d=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=oa(c,function(a){return d.test(a.className)});c.count=b});b.ba||u(a.ba,function(a){var b=a.name;Eb[b]&&(c=oa(c,Eb[b](b,a.value)))});b.Ja||u(a.Ja,function(a){var b,d=a.gb;a.type&&yc[a.type]?b=yc[a.type](d,a.lb):d.length&&(b=zd(d));b&&(c=oa(c,b))});b.id||a.id&&(c=oa(c,function(b){return!!b&&b.id==a.id}));
c||"default"in b||(c=ac);return c}function x(a){return K(a)%2}function p(a){return!(K(a)%2)}function K(a){var b=a.parentNode,c=0,d=b[xc],e=a._i||-1,f=b._l||-1;if(!d)return-1;d=d.length;if(f==d&&0<=e&&0<=f)return e;b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[Ha])Ga(b)&&(b._i=++c,a===b&&(e=c));return e}function D(a){for(;a=a[Ha];)if(Ga(a))return m;return k}function zc(a){for(;a=a[Ad];)if(Ga(a))return m;return k}function pa(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||
"":"style"==b?a.style.cssText||"":(na?a.getAttribute(b):a.getAttribute(b,2))||""}function bb(a){return 1==a.nodeType}function oa(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}}function vc(a){function b(){0<=o&&(q.id=c(o,v).replace(/\\/g,""),o=-1);if(0<=p){var a=p==v?l:c(p,v);0>">~+".indexOf(a)?q.z=a:q.Va=a;p=-1}0<=j&&(q.J.push(c(j+1,v).replace(/\\/g,"")),j=-1)}function c(b,d){return Da(a.slice(b,d))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",
d=[],e=-1,f=-1,g=-1,i=-1,j=-1,o=-1,p=-1,x="",F="",D,v=0,K=a.length,q=l,G=l;x=F,F=a.charAt(v),v<K;v++)if("\\"!=x)if(q||(D=v,q={la:l,ba:[],Ja:[],J:[],z:l,Va:l,id:l,kb:function(){return na?this.cc:this.z}},p=v),0<=e)if("]"==F){G.gb?G.lb=c(g||e+1,v):G.gb=c(e+1,v);if((e=G.lb)&&('"'==e.charAt(0)||"'"==e.charAt(0)))G.lb=e.slice(1,-1);q.Ja.push(G);G=l;e=g=-1}else"="==F&&(g=0<="|~^$*".indexOf(x)?x:"",G.type=g+F,G.gb=c(e+1,v-g.length),g=v+1);else 0<=f?")"==F&&(0<=i&&(G.value=c(f+1,v)),i=f=-1):"#"==F?(b(),o=
v+1):"."==F?(b(),j=v):":"==F?(b(),i=v):"["==F?(b(),e=v,G={}):"("==F?(0<=i&&(G={name:c(i+1,v),value:l},q.ba.push(G)),f=v):" "==F&&x!=F&&(b(),0<=i&&q.ba.push({name:c(i+1,v)}),q.Kb=q.ba.length||q.Ja.length||q.J.length,q.mc=q.la=c(D,v),q.cc=q.z=q.Va?l:q.z||"*",q.z&&(q.z=q.z.toUpperCase()),d.length&&d[d.length-1].Va&&(q.Hb=d.pop(),q.la=q.Hb.la+" "+q.la),d.push(q),q=l);return d}function Fa(a,b){var c=b||[];a&&c.push(a);return c}var uc=C&&"BackCompat"==document.compatMode,xc=document.firstChild.children?
"children":"childNodes",na=m,yc={"*=":function(a,b){return function(c){return 0<=pa(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==pa(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+pa(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+pa(b,a)+" ").indexOf(c)}},"|=":function(a,b){b=" "+b;return function(c){c=" "+pa(c,a);return c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return pa(c,
a)==b}}},cb="undefined"==typeof document.firstChild.nextElementSibling,Ha=!cb?"nextElementSibling":"nextSibling",Ad=!cb?"previousElementSibling":"previousSibling",Ga=cb?bb:ac,Eb={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return zc},"last-child":function(){return D},"only-child":function(){return function(a){return!zc(a)||!D(a)?m:k}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;
if(1===c||3==c)return m}return k}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},not:function(a,b){var c=vc(b)[0],d={w:1};"*"!=c.z&&(d.z=1);c.J.length||(d.J=1);var e=o(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){if("odd"==b)return x;if("even"==b)return p;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,e=c[1]?parseInt(c[1],10):0,f=0,g=-1;0<d?0>e?e=e%d&&d+e%d:0<
e&&(e>=d&&(f=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(g=e,e%=d));if(0<d)return function(a){a=K(a);return a>=f&&(0>g||a<=g)&&a%d==e};b=e}var i=parseInt(b,10);return function(a){return K(a)==i}}},zd=A?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return na?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}},wc={},tc={},sc={},rc=!!document.querySelectorAll&&(!C||E("526")),O=0,yd=A?function(a){return na?a.getAttribute("_uid")||
a.setAttribute("_uid",++O)||O:a.uniqueID}:function(a){return a._uid||(a._uid=++O)};a.ba=Eb;return a}();ca("goog.dom.query",I);ca("goog.dom.query.pseudos",I.ba);!A||vb(9);var bc=!A||vb(9),cc=A&&!E("8");!C||E("528");B&&E("1.9b")||A&&E("8")||jb&&E("9.5")||C&&E("528");!B||E("8");function dc(){}dc.prototype.Db=m;dc.prototype.Ka=function(){this.Db||(this.Db=k,this.La())};dc.prototype.La=function(){this.$b&&ec.apply(l,this.$b)};function ec(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];fa(d)?ec.apply(l,d):d&&"function"==typeof d.Ka&&d.Ka()}};function J(a,b){this.type=a;this.currentTarget=this.target=b}sa(J,dc);J.prototype.La=function(){delete this.type;delete this.target;delete this.currentTarget};J.prototype.nb=m;J.prototype.Ob=k;J.prototype.preventDefault=function(){this.Ob=m};function fc(a){fc[" "](a);return a}fc[" "]=n();function gc(a,b){a&&this.F(a,b)}sa(gc,J);r=gc.prototype;r.target=l;r.relatedTarget=l;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=m;r.altKey=m;r.shiftKey=m;r.metaKey=m;r.ka=l;
r.F=function(a,b){var c=this.type=a.type;J.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(B){var f;a:{try{fc(d.nodeName);f=k;break a}catch(e){}f=m}f||(d=l)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=C||a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=C||a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.ka=a;delete this.Ob;delete this.nb};r.preventDefault=function(){gc.Qb.preventDefault.call(this);var a=this.ka;if(a.preventDefault)a.preventDefault();else if(a.returnValue=m,cc)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};r.ac=aa("ka");
r.La=function(){gc.Qb.La.call(this);this.relatedTarget=this.currentTarget=this.target=this.ka=l};function hc(){}var ic=0;r=hc.prototype;r.key=0;r.na=m;r.Bb=m;r.F=function(a,b,c,d,f,e){if(ga(a))this.Jb=k;else if(a&&a.handleEvent&&ga(a.handleEvent))this.Jb=m;else throw Error("Invalid listener argument");this.Pa=a;this.Mb=b;this.src=c;this.type=d;this.capture=!!f;this.Da=e;this.Bb=m;this.key=++ic;this.na=m};r.handleEvent=function(a){return this.Jb?this.Pa.call(this.Da||this.src,a):this.Pa.handleEvent.call(this.Pa,a)};var jc={},L={},kc={},lc={};
function M(a,b,c,d,f){if(b){if(ea(b)){for(var e=0;e<b.length;e++)M(a,b[e],c,d,f);return l}var d=!!d,g=L;b in g||(g[b]={v:0,ca:0});g=g[b];d in g||(g[d]={v:0,ca:0},g.v++);var g=g[d],j=a[ia]||(a[ia]=++ja),i;g.ca++;if(g[j]){i=g[j];for(e=0;e<i.length;e++)if(g=i[e],g.Pa==c&&g.Da==f){if(g.na)break;return i[e].key}}else i=g[j]=[],g.v++;e=mc();e.src=a;g=new hc;g.F(c,e,a,b,d,f);c=g.key;e.key=c;i.push(g);jc[c]=g;kc[j]||(kc[j]=[]);kc[j].push(g);a.addEventListener?(a==s||!a.Zb)&&a.addEventListener(b,e,d):a.attachEvent(b in
lc?lc[b]:lc[b]="on"+b,e);return c}throw Error("Invalid event type");}function mc(){var a=nc,b=bc?function(c){return a.call(b.src,b.key,c)}:function(c){c=a.call(b.src,b.key,c);if(!c)return c};return b}
function N(a){if(jc[a]){var b=jc[a];if(!b.na){var c=b.src,d=b.type,f=b.Mb,e=b.capture;c.removeEventListener?(c==s||!c.Zb)&&c.removeEventListener(d,f,e):c.detachEvent&&c.detachEvent(d in lc?lc[d]:lc[d]="on"+d,f);c=c[ia]||(c[ia]=++ja);f=L[d][e][c];if(kc[c]){var g=kc[c];z(g,b);0==g.length&&delete kc[c]}b.na=k;f.Lb=k;oc(d,e,c,f);delete jc[a]}}}
function oc(a,b,c,d){if(!d.Qa&&d.Lb){for(var f=0,e=0;f<d.length;f++)d[f].na?d[f].Mb.src=l:(f!=e&&(d[e]=d[f]),e++);d.length=e;d.Lb=m;0==e&&(delete L[a][b][c],L[a][b].v--,0==L[a][b].v&&(delete L[a][b],L[a].v--),0==L[a].v&&delete L[a])}}function pc(a,b,c,d,f){var e=1,b=b[ia]||(b[ia]=++ja);if(a[b]){a.ca--;a=a[b];a.Qa?a.Qa++:a.Qa=1;try{for(var g=a.length,j=0;j<g;j++){var i=a[j];i&&!i.na&&(e&=qc(i,f)!==m)}}finally{a.Qa--,oc(c,d,b,a)}}return Boolean(e)}
function qc(a,b){var c=a.handleEvent(b);a.Bb&&N(a.key);return c}
function nc(a,b){if(!jc[a])return k;var c=jc[a],d=c.type,f=L;if(!(d in f))return k;var f=f[d],e,g;if(!bc){var j;if(!(j=b))a:{j=["window","event"];for(var i=s;e=j.shift();)if(i[e]!=l)i=i[e];else{j=l;break a}j=i}e=j;j=k in f;i=m in f;if(j){if(0>e.keyCode||e.returnValue!=h)return k;a:{var o=m;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(x){o=k}if(o||e.returnValue==h)e.returnValue=k}}o=new gc;o.F(e,this);e=k;try{if(j){for(var p=[],K=o.currentTarget;K;K=K.parentNode)p.push(K);g=f[k];g.ca=g.v;for(var D=
p.length-1;!o.nb&&0<=D&&g.ca;D--)o.currentTarget=p[D],e&=pc(g,p[D],d,k,o);if(i){g=f[m];g.ca=g.v;for(D=0;!o.nb&&D<p.length&&g.ca;D++)o.currentTarget=p[D],e&=pc(g,p[D],d,m,o)}}else e=qc(c,o)}finally{p&&(p.length=0),o.Ka()}return e}d=new gc(b,this);try{e=qc(c,d)}finally{d.Ka()}return e};function Ac(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}Ac.prototype.contains=function(a){return!this||!a?m:a instanceof Ac?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom};function Bc(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}Bc.prototype.contains=function(a){return a instanceof Bc?this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height:a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height};function P(a,b,c){t(b)?Cc(a,c,b):Jb(b,ra(Cc,a))}function Cc(a,b,c){a.style[Oa(c)]=b}function Q(a,b){var c=Ob(a);return c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,l))?c[b]||c.getPropertyValue(b):""}function Dc(a,b){return a.currentStyle?a.currentStyle[b]:l}function Ec(a,b){return Q(a,b)||Dc(a,b)||a.style&&a.style[b]}function Fc(a,b,c){var d,f=B&&(eb||lb)&&E("1.9");b instanceof Hb?(d=b.x,b=b.y):(d=b,b=c);a.style.left=Gc(d,f);a.style.top=Gc(b,f)}
function Hc(a){var b=a.getBoundingClientRect();A&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Ic(a){if(A&&!vb(8))return a.offsetParent;for(var b=Ob(a),c=Ec(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=Ec(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return l}
function Jc(a){var b,c=Ob(a),d=Ec(a,"position"),f=B&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),e=new Hb(0,0),g;b=c?9==c.nodeType?c:Ob(c):document;if(g=A)if(g=!vb(9))Mb(b),g=m;g=g?b.body:b.documentElement;if(a==g)return e;if(a.getBoundingClientRect)b=Hc(a),a=Mb(c),a=Rb(a.Ba),e.x=b.left+a.x,e.y=b.top+a.y;else if(c.getBoxObjectFor&&!f)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),e.x=b.screenX-a.screenX,e.y=b.screenY-a.screenY;else{b=
a;do{e.x+=b.offsetLeft;e.y+=b.offsetTop;b!=a&&(e.x+=b.clientLeft||0,e.y+=b.clientTop||0);if(C&&"fixed"==Ec(b,"position")){e.x+=c.body.scrollLeft;e.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(jb||C&&"absolute"==d)e.y-=c.body.offsetTop;for(b=a;(b=Ic(b))&&b!=c.body&&b!=g;)if(e.x-=b.scrollLeft,!jb||"TR"!=b.tagName)e.y-=b.scrollTop}return e}function Kc(a,b){var c=Lc(a),d=Lc(b);return new Hb(c.x-d.x,c.y-d.y)}
function Lc(a){var b=new Hb;if(1==a.nodeType)if(a.getBoundingClientRect)a=Hc(a),b.x=a.left,b.y=a.top;else{var c;c=Mb(a);c=Rb(c.Ba);a=Jc(a);b.x=a.x-c.x;b.y=a.y-c.y}else{c=ga(a.ac);var d=a;a.targetTouches?d=a.targetTouches[0]:c&&a.ka.targetTouches&&(d=a.ka.targetTouches[0]);b.x=d.clientX;b.y=d.clientY}return b}function Mc(a,b,c){if(b instanceof Ib)c=b.height,b=b.width;else if(c==h)throw Error("missing height argument");a.style.width=Gc(b,k);a.style.height=Gc(c,k)}
function Gc(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function Nc(a){if("none"!=Ec(a,"display"))return Oc(a);var b=a.style,c=b.display,d=b.visibility,f=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=Oc(a);b.display=c;b.position=f;b.visibility=d;return a}function Oc(a){var b=a.offsetWidth,c=a.offsetHeight,d=C&&!b&&!c;return(b===h||d)&&a.getBoundingClientRect?(a=Hc(a),new Ib(a.right-a.left,a.bottom-a.top)):new Ib(b,c)}
function Pc(a){var b=Jc(a),a=Nc(a);return new Bc(b.x,b.y,a.width,a.height)}function R(a,b){var c=a.style;"opacity"in c?c.opacity=b:"MozOpacity"in c?c.MozOpacity=b:"filter"in c&&(c.filter=""===b?"":"alpha(opacity="+100*b+")")}function S(a,b){a.style.display=b?"":"none"}function Qc(a,b){if(/^\d+px?$/.test(b))return parseInt(b,10);var c=a.style.left,d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=b;var f=a.style.pixelLeft;a.style.left=c;a.runtimeStyle.left=d;return f}
function Rc(a,b){if(A){var c=Qc(a,Dc(a,b+"Left")),d=Qc(a,Dc(a,b+"Right")),f=Qc(a,Dc(a,b+"Top")),e=Qc(a,Dc(a,b+"Bottom"));return new Ac(f,d,e,c)}c=Q(a,b+"Left");d=Q(a,b+"Right");f=Q(a,b+"Top");e=Q(a,b+"Bottom");return new Ac(parseFloat(f),parseFloat(d),parseFloat(e),parseFloat(c))};function Sc(a){var b,c;this.W=a;this.n=new Tc;this.za=[];this.Ab=k;var d=Pc(a);b=Sb("div","annotorious-annotationlayer");P(b,"position","relative");P(b,"display","inline-block");Uc(a,b);Mc(b,d.width,d.height);Wb(b,a);b.appendChild(a);c=H(Vc,{width:d.width,height:d.height});Ab(c,"annotorious-item-unfocus");b.appendChild(c);this.h=H(Vc,{width:d.width,height:d.height});S(this.h,m);b.appendChild(this.h);this.popup=new T(b,this);a=new Wc;a.F(this.h,this);this.za.push(a);this.qa=a;a=new Xc;a.F(this.h,this);
this.za.push(a);this.o=new Yc(c,this.popup,this);this.editor=new U(this,b);this.tb=new Zc(this,b);var f=this;M(b,"mouseover",function(a){a=a.relatedTarget;if(!a||!Zb(b,a))f.n.fireEvent($c),Gb(c,"annotorious-item-unfocus","annotorious-item-focus")});M(b,"mouseout",function(a){a=a.relatedTarget;if(!a||!Zb(b,a))f.n.fireEvent(ad),Gb(c,"annotorious-item-focus","annotorious-item-unfocus")});M(c,"mousedown",function(a){f.Ab&&(S(f.h,k),f.o.l(h),f.qa.ob(a.offsetX,a.offsetY))});this.n.g(bd,function(a){a=a.qb;
f.editor.ea({x:a.left+f.W.offsetLeft,y:a.bottom+4+f.W.offsetTop});f.editor.open()});this.n.g(cd,function(){S(f.h,m);f.qa.K()})}
function Uc(a,b){function c(c,d){P(b,c,d);P(a,c,0)}var d=Rc(a,"margin");0!=d.top&&c("margin-top",d.top+"px");0!=d.right&&c("margin-right",d.right+"px");0!=d.bottom&&setRest("margin-bottom",d.bottom+"px");0!=d.left&&c("margin-left",d.left+"px");d=Rc(a,"padding");0!=d.top&&c("padding-top",d.top+"px");0!=d.right&&c("padding-right",d.right+"px");0!=d.bottom&&setRest("padding-bottom",d.bottom+"px");0!=d.left&&c("padding-left",d.left+"px")}r=Sc.prototype;
r.Eb=function(a){this.o.m(a);var b=y(this.za,function(b){return b.jb()==a.shapes[0].type});if(b){S(this.h,k);this.o.l(h);var c=this.h.getContext("2d"),d=a.shapes[0],f=this,d="pixel"==d.units?d:Ba(d,function(a){return f.Ca(a)});b.Ma(c,d)}b=Aa(a.shapes[0]).geometry;b="pixel"==a.shapes[0].units?{x:b.x,y:b.y+b.height}:this.Ca({x:b.x,y:b.y+b.height});this.editor.ea({x:b.x+this.W.offsetLeft,y:b.y+4+this.W.offsetTop});this.editor.open(a)};r.r=function(a,b){this.o.r(a,b)};r.g=function(a,b){this.n.g(a,b)};
r.fireEvent=function(a,b){this.n.fireEvent(a,b)};r.Ca=function(a){var b=Nc(this.W);return{x:a.x*b.width,y:a.y*b.height}};r.Q=aa("qa");r.A=function(){return this.o.A()};r.R=aa("za");r.getItem=function(){return{src:dd(this.W)}};r.l=function(a){this.o.l(a)};r.m=function(a){this.o.m(a)};r.ma=function(a,b){this.n.ma(a,b)};r.da=function(a){this.qa=y(this.za,function(b){return b.getName()==a})};
r.U=function(a){this.Ab=a;a||(a=this.tb,a.ra(),delete a.yb,delete a.xb,delete a.eb,delete a.cb,(a=a.element)&&a.parentNode&&a.parentNode.removeChild(a),delete this.tb)};r.K=function(a){S(this.h,m);this.qa.K();a&&this.o.r(a)};r.Fa=function(a){var b=Nc(this.W);return{x:a.x/b.width,y:a.y/b.height}};function V(a,b){this.T={};this.t=[];var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var f;if(a instanceof V)ed(a),f=a.t.concat(),d=W(a);else{var c=[],e=0;for(f in a)c[e++]=f;f=c;c=[];e=0;for(d in a)c[e++]=a[d];d=c}for(c=0;c<f.length;c++)this.set(f[c],d[c])}}V.prototype.v=0;function W(a){ed(a);for(var b=[],c=0;c<a.t.length;c++)b.push(a.T[a.t[c]]);return b}
V.prototype.clear=function(){this.T={};this.v=this.t.length=0};function ed(a){if(a.v!=a.t.length){for(var b=0,c=0;b<a.t.length;){var d=a.t[b];Object.prototype.hasOwnProperty.call(a.T,d)&&(a.t[c++]=d);b++}a.t.length=c}if(a.v!=a.t.length){for(var f={},c=b=0;b<a.t.length;)d=a.t[b],Object.prototype.hasOwnProperty.call(f,d)||(a.t[c++]=d,f[d]=1),b++;a.t.length=c}}V.prototype.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.T,a)?this.T[a]:b};
V.prototype.set=function(a,b){Object.prototype.hasOwnProperty.call(this.T,a)||(this.v++,this.t.push(a));this.T[a]=b};function fd(){this.k=new V;this.Ha=[];this.O=[];this.rb=[];this.ua=[];this.ga=[];this.Xa=[];this.vb=k}r=fd.prototype;r.F=function(){var a=I("img.annotatable",document);Ua(this.rb,a);Ua(this.ua,a);gd(this);var b=this,c=M(window,"scroll",function(){0<b.ua.length?gd(b):N(c)})};r.va=function(a,b){if(a.onInitAnnotator)a.onInitAnnotator(b)};
function gd(a){u(a.ua,function(b){for(var c=b,d=c.offsetTop,f=c.offsetLeft,e=c.offsetWidth,g=c.offsetHeight;c.offsetParent;)c=c.offsetParent,d+=c.offsetTop,f+=c.offsetLeft;d<window.pageYOffset+window.innerHeight&&f<window.pageXOffset+window.innerWidth&&d+g>window.pageYOffset&&f+e>window.pageXOffset&&hd(a,b)})}
function hd(a,b){var c=[],d=[],f=new Sc(b);a.vb||f.U(m);var e=dd(b);u(a.Ha,function(a){f.g(a.type,a.Da)});u(a.O,function(b){a.va(b,f)});u(a.ga,function(a){a.src==e&&(f.r(a),c.push(a))});u(a.Xa,function(a){a.src==e&&(f.m(a),d.push(a))});u(c,function(b){z(a.ga,b)});u(d,function(b){z(a.Xa,b)});a.k.set(e,f);z(a.ua,b)}function dd(a){var b=a.getAttribute("data-original");return b?b:a.src}r.r=function(a,b){if(this.P(a.src)){var c=this.k.get(a.src);c?c.r(a,b):(this.ga.push(a),b&&z(this.ga,b))}};
r.g=function(a,b){u(W(this.k),function(c){c.g(a,b)});this.Ha.push({type:a,Da:b})};r.Ia=function(a){this.O.push(a);var b=this;u(W(this.k),function(c){b.va(a,c)})};r.P=function(a){return Object.prototype.hasOwnProperty.call(this.k.T,a)?k:y(this.ua,function(b){return dd(b)==a})!=l};r.Q=function(a){if(this.P(a)&&(a=this.k.get(a)))return a.Q().getName()};
r.A=function(a){if(a){var b=this.k.get(a);return b?b.A():Qa(this.ga,function(b){return b.src==a})}var c=[];u(W(this.k),function(a){Ua(c,a.A())});Ua(c,this.ga);return c};r.R=function(a){if(this.P(a)&&(a=this.k.get(a)))return Ra(a.R(),function(a){return a.getName()})};r.l=function(a){if(a){if(this.P(a.src)){var b=this.k.get(a.src);b&&b.l(a)}}else u(W(this.k),function(a){a.l()})};r.Ra=function(a){this.pb(a)&&(this.rb.push(a),hd(this,a))};
r.m=function(a){if(this.P(a.src)){var b=this.k.get(a.src);b?b.m(a):this.Xa.push(a)}};r.da=function(a,b){if(this.P(a)){var c=this.k.get(a);c&&c.da(b)}};r.U=function(a){this.vb=a;u(W(this.k),function(b){b.U(a)})};r.pb=function(a){return Xb(a)?"IMG"==a.tagName:m};function Yc(a,b,c){this.j=a;this.C=b;this.e=c;this.fa=[];this.Z=[];this.c=this.j.getContext("2d");this.ia=k;this.ab=m;var d=this;M(this.j,"mousemove",function(a){if(d.ia){var b=id(d,a.offsetX,a.offsetY);b?(d.ab=m,d.f?d.f!=b&&(d.ia=m,X(d.C)):(d.f=b,jd(d),d.e.fireEvent(kd,{$:d.f,Sa:a}))):!d.ab&&d.f&&(d.ia=m,X(d.C))}else d.pa=a});c.g(ad,function(){delete d.f;d.ia=k});c.g(ld,function(){if(!d.ia&&d.pa){var a=d.f;d.f=id(d,d.pa.offsetX,d.pa.offsetY);d.ia=k;a!=d.f?(jd(d),d.e.fireEvent(md,{$:a,Sa:d.pa}),d.e.fireEvent(kd,
{$:d.f,Sa:d.pa})):d.f&&nd(d.C)}else jd(d)})}Yc.prototype.r=function(a,b){b&&(b==this.f&&delete this.f,z(this.fa,b),delete this.Z[Ca(b.shapes[0])]);this.fa.push(a);var c=a.shapes[0];if("pixel"!=c.units)var d=this,c=Ba(c,function(a){return d.e.Ca(a)});this.Z[Ca(a.shapes[0])]=c;jd(this)};Yc.prototype.m=function(a){a==this.f&&delete this.f;z(this.fa,a);delete this.Z[Ca(a.shapes[0])];jd(this)};Yc.prototype.A=function(){return Ta(this.fa)};Yc.prototype.l=function(a){(this.f=a)?this.ab=k:X(this.C);jd(this)};
function id(a,b,c){a=od(a,b,c);if(0<a.length)return a[0]}
function od(a,b,c){var d=[];u(a.fa,function(f){var e;e=a.Z[Ca(f.shapes[0])];if("rect"==e.type)e=b<e.geometry.x||c<e.geometry.y||b>e.geometry.x+e.geometry.width||c>e.geometry.y+e.geometry.height?m:k;else if("polygon"==e.type){e=e.geometry.aa;for(var g=m,j=e.length-1,i=0;i<e.length;i++)e[i].y>c!=e[j].y>c&&b<(e[j].x-e[i].x)*(c-e[i].y)/(e[j].y-e[i].y)+e[i].x&&(g=!g),j=i;e=g}else e=m;e&&d.push(f)});Xa(d,function(a,b){return za(a.shapes[0])>za(b.shapes[0])});return d}
function pd(a,b,c){var d=y(a.e.R(),function(a){return a.jb()==b.type});d?d.Ma(a.c,b,c):console.log("WARNING unsupported shape type: "+b.type)}function jd(a){a.c.clearRect(0,0,a.j.width,a.j.height);u(a.fa,function(b){pd(a,a.Z[Ca(b.shapes[0])])});if(a.f){var b=a.Z[Ca(a.f.shapes[0])];pd(a,b,k);b=Aa(b).geometry;a.C.show(a.f,{x:b.x,y:b.y+b.height+5})}};var qd={};
function rd(a){this.N=a;this.M=a.div;var b=parseInt(Q(this.M,"width")),c=parseInt(Q(this.M,"height"));this.n=new Tc;var d=Sb("div","annotorious-annotationlayer");P(d,"position","relative");Mc(d,b,c);Wb(d,this.M);d.appendChild(this.M);new Zc(this,d,"Hold CTRL to Annotate");var f=H(sd,{mb:"Click and Drag"});P(f,"z-index",9998);R(f,0);d.appendChild(f);this.popup=new T(d,this);this.o=new td(a,this.popup,this);this.h=H(Vc,{width:b,height:c});S(this.h,m);P(this.h,"z-index",9999);d.appendChild(this.h);this.ya=
new Wc;this.ya.F(this.h,this);this.editor=new U(this,d);P(this.editor.element,"z-index",1E4);var e=this;M(d,"mouseover",function(a){a=a.relatedTarget;(!a||!Zb(d,a))&&e.n.fireEvent($c)});M(d,"mouseout",function(a){a=a.relatedTarget;(!a||!Zb(d,a))&&e.n.fireEvent(ad)});M(document,"keydown",function(a){17==a.keyCode&&(R(f,0.8),S(e.h,k),window.setTimeout(function(){R(f,0)},2E3))});M(this.h,"mousedown",function(a){e.ya.ob(a.clientX,a.clientY)});this.n.g(bd,function(a){a=a.qb;e.editor.ea({x:a.left+e.M.offsetLeft,
y:a.bottom+4+e.M.offsetTop});e.editor.open()});this.n.g(cd,function(){e.K()})}r=rd.prototype;r.Eb=function(a){this.o.m(a);var b=this.ya,c=this;if(b){S(this.h,k);this.o.l(h);var d=this.h.getContext("2d"),f=Ba(a.shapes[0],function(a){return c.Ca(a)});b.Ma(d,f);b=Aa(f).geometry;this.editor.ea({x:b.x+this.M.offsetLeft,y:b.y+b.height+4+this.M.offsetTop});this.editor.open(a)}};r.r=function(a){this.o.r(a)};r.g=function(a,b){this.n.g(a,b)};r.fireEvent=function(a,b){this.n.fireEvent(a,b)};
r.Ca=function(a){a=this.N.getViewPortPxFromLonLat(new OpenLayers.LonLat(a.x,a.y));return{x:a.x,y:a.y}};r.Q=aa("ya");r.A=n();r.R=n();r.getItem=function(){return{src:"map://openlayers/something"}};r.l=function(a){this.o.l(a)};r.m=function(a){this.o.m(a)};r.ma=function(a,b){this.n.ma(a,b)};r.da=n();r.U=n();r.K=function(a){S(this.h,m);this.ya.K();a&&this.o.r(a)};r.Fa=function(a){a=this.N.getLonLatFromPixel(new OpenLayers.Pixel(a.x,a.y));return{x:a.lon,y:a.lat}};function ud(){this.k=new V;this.Ha=[];this.O=[];this.Vb=[]}r=ud.prototype;r.va=function(a,b){if(a.onInitAnnotator)a.onInitAnnotator(b)};r.F=n();r.r=n();r.g=n();r.Ia=function(a){this.O.push(a);var b=this;u(W(this.k),function(c){b.va(a,c)})};r.P=n();r.Q=n();r.A=n();r.R=n();r.l=n();r.Ra=function(a){var b=new rd(a),c=this;u(this.Ha,function(a){b.g(a.type,a.Da)});u(this.O,function(a){c.va(a,b)});this.k.set(map.id,b);this.Vb.push(map)};r.m=n();r.da=n();r.U=n();r.pb=function(a){return a instanceof OpenLayers.Map};function td(a,b,c){this.N=a;this.C=b;P(this.C.element,"z-index",99E3);this.wa=[];this.Wa=new OpenLayers.Layer.Boxes("Annotorious");this.N.addLayer(this.Wa);var d=this;this.N.events.register("move",this.N,function(){if(d.ha){var a=d.ha.Ea.div,b=Kc(a,d.N.div),a=parseInt(a.style[Oa("height")]||"",10);d.C.ea({x:b.x,y:b.y+a+5})}});c.g(ld,function(){d.bb==d.ha?nd(d.C):vd(d,d.bb,d.ha)})}
function vd(a,b,c){if(b){var d=Kc(b.Ea.div,a.N.div),f=parseInt(b.Ea.div.style[Oa("height")]||"",10);P(b.Ib,"border-color","#fff000");a.C.show(b.$,{x:d.x,y:d.y+f+5});a.ha=b}else delete a.ha;c&&P(c.Ib,"border-color","#fff")}
td.prototype.r=function(a){console.log(a);var b=a.shapes[0].geometry,b=new OpenLayers.Marker.Box(new OpenLayers.Bounds(b.x,b.y,b.x+b.width,b.y+b.height));Ab(b.div,"annotorious-ol-boxmarker-outer");P(b.div,"border",l);var c=Sb("div","annotorious-ol-boxmarker-inner");Mc(c,"100%","100%");b.div.appendChild(c);var d={$:a,Ea:b,Ib:c},f=this;M(c,"mouseover",function(){f.ha||vd(f,d);f.bb=d});M(c,"mouseout",function(){delete f.bb;X(f.C)});this.wa.push(d);Xa(this.wa,function(a,b){return za(b.$.shapes[0])-za(a.$.shapes[0])});
var e=1E4;u(this.wa,function(a){P(a.Ea.div,"z-index",e);e++});this.Wa.addMarker(b)};td.prototype.m=function(a){var b=y(this.wa,function(b){return b.$==a});b&&(z(this.wa,b),this.Wa.removeMarker(b.Ea))};td.prototype.A=n();td.prototype.l=function(a){a||X(this.C)};window.annotorious||(window.annotorious={});window.annotorious.plugin||(window.annotorious.plugin={});function Xc(){}r=Xc.prototype;r.F=function(a,b){this.j=a;this.e=b;this.c=a.getContext("2d");this.Y=[];this.V=m};
r.oa=function(){function a(a,b){return 1<c.Y.length&&5>Math.abs(a-c.d.x)&&5>Math.abs(b-c.d.y)}function b(a,b){c.c.clearRect(0,0,c.j.width,c.j.height);c.c.lineWidth=2.5;c.c.strokeStyle="#000000";c.c.beginPath();c.c.moveTo(c.d.x,c.d.y);u(c.Y,function(a){c.c.lineTo(a.x,a.y)});c.c.lineTo(a.x,a.y);c.c.stroke();c.c.lineWidth=1.4;c.c.strokeStyle="#ffffff";c.c.beginPath();c.c.moveTo(c.d.x,c.d.y);u(c.Y,function(a){c.c.lineTo(a.x,a.y)});c.c.lineTo(a.x,a.y);c.c.stroke();b&&(c.c.lineWidth=1,c.c.fillStyle="#ffffff",
c.c.strokeStyle="#000000",c.c.beginPath(),c.c.arc(a.x,a.y,3.5,0,2*Math.PI,m),c.c.fill(),c.c.stroke())}var c=this;this.X=M(this.j,"mousemove",function(d){c.V&&(c.Wb={x:d.offsetX,y:d.offsetY},b(c.Wb,a(d.offsetX,d.offsetY)))});this.ja=M(this.j,"mouseup",function(d){a(d.offsetX,d.offsetY)?(c.V=m,b(c.d),c.e.fireEvent(bd,{Sa:d,shape:c.Na(),qb:c.Oa()})):c.Y.push({x:d.offsetX,y:d.offsetY})})};r.ra=function(){this.X&&(N(this.X),delete this.X);this.ja&&(N(this.ja),delete this.ja)};r.getName=ba("polygon");
r.jb=ba("polygon");r.ob=function(a,b){this.V=k;this.oa();this.d=new ta(a,b);this.e.fireEvent(wd,{offsetX:a,offsetY:b});P(document.body,"-webkit-user-select","none")};r.K=function(){this.ra();this.c.clearRect(0,0,this.j.width,this.j.height);P(document.body,"-webkit-user-select","auto");this.Y=[]};r.Na=function(){var a=[];a.push(this.e.Fa(this.d));var b=this;u(this.Y,function(c){a.push(b.e.Fa(c))});return new ya("polygon",new ua(a))};
r.Oa=function(){var a=this.d.x,b=this.d.x,c=this.d.y,d=this.d.y;u(this.Y,function(f){f.x>a&&(a=f.x);f.x<b&&(b=f.x);f.y>d&&(d=f.y);f.y<c&&(c=f.y)});return{top:c,right:a,bottom:d,left:b}};
r.Ma=function(a,b,c){c=c?"#fff000":"#ffffff";a.lineWidth=1.3;a.strokeStyle="#000000";var d;d=b.geometry.aa;var f=0>va(d)?-1:1;if(4>d.length)d=wa(d,1.2*f);else{for(var e=d.length-1,g=1,j=[],i=0;i<d.length;i++)e=wa([d[e],d[i],d[g]],1.2*f),j.push(e[1]),e=i,g++,g>d.length-1&&(g=0);d=j}f=(new ya("polygon",new ua(d))).geometry.aa;a.beginPath();a.moveTo(f[0].x,f[0].y);for(d=1;d<f.length;d++)a.lineTo(f[d].x,f[d].y);a.lineTo(f[0].x,f[0].y);a.stroke();a.lineWidth=1.2;a.strokeStyle=c;b=b.geometry.aa;a.beginPath();
a.moveTo(b[0].x,b[0].y);for(d=1;d<b.length;d++)a.lineTo(b[d].x,b[d].y);a.lineTo(b[0].x,b[0].y);a.stroke()};function Wc(){}r=Wc.prototype;r.F=function(a,b){this.j=a;this.e=b;this.c=a.getContext("2d");this.c.lineWidth=1;this.V=m};
r.oa=function(){var a=this;this.X=M(this.j,"mousemove",function(b){if(a.V){a.B={x:b.offsetX,y:b.offsetY};a.c.clearRect(0,0,a.j.width,a.j.height);var b=a.B.x-a.d.x,c=a.B.y-a.d.y;a.c.strokeStyle="#000000";a.c.strokeRect(a.d.x+0.5,a.d.y+0.5,b,c);a.c.strokeStyle="#ffffff";0<b&&0<c?a.c.strokeRect(a.d.x+1.5,a.d.y+1.5,b-2,c-2):0<b&&0>c?a.c.strokeRect(a.d.x+1.5,a.d.y-0.5,b-2,c+2):0>b&&0>c?a.c.strokeRect(a.d.x-0.5,a.d.y-0.5,b+2,c+2):a.c.strokeRect(a.d.x-0.5,a.d.y+1.5,b+2,c-2)}});this.ja=M(this.j,"mouseup",
function(b){a.V=m;var c=a.Na();c?a.e.fireEvent(bd,{Sa:b,shape:c,qb:a.Oa()}):a.e.fireEvent(cd)})};r.ra=function(){this.X&&(N(this.X),delete this.X);this.ja&&(N(this.ja),delete this.fc)};r.getName=ba("rect_drag");r.jb=ba("rect");r.ob=function(a,b){this.V=k;this.oa();this.d=new ta(a,b);this.e.fireEvent(wd,{offsetX:a,offsetY:b});P(document.body,"-webkit-user-select","none")};r.K=function(){this.ra();this.c.clearRect(0,0,this.j.width,this.j.height);P(document.body,"-webkit-user-select","auto");delete this.B};
r.Na=function(){if(this.B&&3<Math.abs(this.B.x-this.d.x)&&3<Math.abs(this.B.y-this.d.y)){var a=this.Oa(),b=this.e.Fa({x:a.left,y:a.top}),a=this.e.Fa({x:a.right-1,y:a.bottom-1});return new ya("rect",new xa(b.x,b.y,a.x-b.x,a.y-b.y))}};r.Oa=function(){var a,b;this.B.x>this.d.x?(a=this.B.x,b=this.d.x):(a=this.d.x,b=this.B.x);var c,d;this.B.y>this.d.y?(c=this.d.y,d=this.B.y):(c=this.B.y,d=this.d.y);return{top:c,right:a,bottom:d,left:b}};
r.Ma=function(a,b,c){if("rect"==b.type){var d;c?(c="#fff000",d=1.2):(c="#ffffff",d=1);b=b.geometry;a.strokeStyle="#000000";a.lineWidth=d;a.strokeRect(b.x+0.5,b.y+0.5,b.width+1,b.height+1);a.strokeStyle=c;a.strokeRect(b.x+1.5,b.y+1.5,b.width-1,b.height-1)}};function Bd(a,b,c){this.src=a;this.text=b;this.shapes=[c];this.context=document.URL};function Cd(a){window.addEventListener?window.addEventListener("load",a):window.attachEvent&&window.attachEvent("onload",a)};function Y(){this.I=[new fd];qd&&this.I.push(new ud);this.O=[];var a=this;Cd(function(){u(a.I,function(a){a.F()});u(a.O,function(b){b.initPlugin&&b.initPlugin(a);u(a.I,function(a){a.Ia(b)})})})}function Z(a,b){return y(a.I,function(a){return a.P(b)})}r=Y.prototype;r.r=function(a,b){var c=Z(this,a.src);c&&c.r(a,b)};r.g=function(a,b){u(this.I,function(c){c.g(a,b)})};r.Ia=function(a,b){try{this.O.push(new window.annotorious.plugin[a](b))}catch(c){console.log("Could not load plugin: "+a)}};
r.Q=function(a){var b=Z(this,a);if(b)return b.Q(a)};r.A=function(a){if(a){var b=Z(this,a);return b?b.A(a):[]}var c=[];u(this.I,function(a){Ua(c,a.A())});return c};r.R=function(a){var b=Z(this,a);if(b)return b.R(a)};r.l=function(a){if(a){var b=Z(this,a.src);b&&b.l(a)}else u(this.I,function(a){a.l()})};r.Ra=function(a){var b=y(this.I,function(b){return b.pb(a)});if(b)b.Ra(a);else throw"Error: Annotorious does not support this media type in the current version or build configuration.";};
r.dc=function(a){var b=this;u(this.A(a),function(a){b.m(a)})};r.m=function(a){var b=Z(this,a.src);b&&b.m(a)};r.da=function(a,b){var c=Z(this,a);c&&c.da(a,b)};r.U=function(a){u(this.I,function(b){b.U(a)})};window.anno=new Y;Y.prototype.addAnnotation=Y.prototype.r;Y.prototype.addHandler=Y.prototype.g;Y.prototype.addPlugin=Y.prototype.Ia;Y.prototype.getActiveSelector=Y.prototype.Q;Y.prototype.getAnnotations=Y.prototype.A;Y.prototype.getAvailableSelectors=Y.prototype.R;
Y.prototype.highlightAnnotation=Y.prototype.l;Y.prototype.makeAnnotatable=Y.prototype.Ra;Y.prototype.removeAll=Y.prototype.dc;Y.prototype.removeAnnotation=Y.prototype.m;Y.prototype.setActiveSelector=Y.prototype.da;Y.prototype.setSelectionEnabled=Y.prototype.U;var Dd;(Dd="ScriptEngine"in s&&"JScript"==s.ScriptEngine())&&(s.ScriptEngineMajorVersion(),s.ScriptEngineMinorVersion(),s.ScriptEngineBuildVersion());function Ed(a,b){this.D=Dd?[]:"";a!=l&&this.append.apply(this,arguments)}Ed.prototype.set=function(a){this.clear();this.append(a)};Dd?(Ed.prototype.hb=0,Ed.prototype.append=function(a,b,c){b==l?this.D[this.hb++]=a:(this.D.push.apply(this.D,arguments),this.hb=this.D.length);return this}):Ed.prototype.append=function(a,b,c){this.D+=a;if(b!=l)for(var d=1;d<arguments.length;d++)this.D+=arguments[d];return this};Ed.prototype.clear=function(){Dd?this.hb=this.D.length=0:this.D=""};
Ed.prototype.toString=function(){if(Dd){var a=this.D.join("");this.clear();a&&this.append(a);return a}return this.D};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

 // Copyright (C) 2006 Google Inc.
 //
 // Licensed under the Apache License, Version 2.0 (the "License");
 // you may not use this file except in compliance with the License.
 // You may obtain a copy of the License at
 //
 //      http://www.apache.org/licenses/LICENSE-2.0
 //
 // Unless required by applicable law or agreed to in writing, software
 // distributed under the License is distributed on an "AS IS" BASIS,
 // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 // See the License for the specific language governing permissions and
 // limitations under the License.

*/
function Fd(){}
var Gd={kc:"<",jc:">",gc:"&",lc:"\u00a0",nc:'"',hc:"'"},$={a:0,abbr:0,acronym:0,address:0,applet:16,area:2,b:0,base:18,basefont:18,bdo:0,big:0,blockquote:0,body:49,br:2,button:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,dd:1,del:0,dfn:0,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,font:0,form:0,frame:18,frameset:16,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:49,hr:2,html:49,i:0,iframe:20,img:2,input:2,ins:0,isindex:18,kbd:0,label:0,legend:0,li:1,link:18,map:0,menu:0,meta:18,noframes:20,noscript:20,object:16,
ol:0,optgroup:0,option:1,p:1,param:18,pre:0,q:0,s:0,samp:0,script:20,select:0,small:0,span:0,strike:0,strong:0,style:20,sub:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,title:24,tr:1,tt:0,u:0,ul:0,"var":0},Hd=/&/g,Id=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,Jd=/</g,Kd=/>/g,Ld=/\"/g,Md=/=/g,Nd=/\0/g,Od=/&(#\d+|#x[0-9A-Fa-f]+|\w+);/g,Pd=/^#(\d+)$/,Qd=/^#x([0-9A-Fa-f]+)$/,Rd=RegExp("^\\s*(?:(?:([a-z][a-z-]*)(\\s*=\\s*(\"[^\"]*\"|'[^']*'|(?=[a-z][a-z-]*\\s*=)|[^>\"'\\s]*))?)|(/?>)|[^a-z\\s>]+)",
"i"),Sd=RegExp("^(?:&(\\#[0-9]+|\\#[x][0-9a-f]+|\\w+);|<[!]--[\\s\\S]*?--\>|<!\\w[^>]*>|<\\?[^>*]*>|<(/)?([a-z][a-z0-9]*)|([^<&>]+)|([<&>]))","i");
Fd.prototype.parse=function(a,b){var c=l,d=m,f=[],e,g,j;a.G=[];for(a.S=m;b;){var i=b.match(d?Rd:Sd),b=b.substring(i[0].length);if(d)if(i[1]){var o=i[1].toLowerCase();if(i[2]){i=i[3];switch(i.charCodeAt(0)){case 34:case 39:i=i.substring(1,i.length-1)}i=i.replace(Nd,"").replace(Od,qa(this.bc,this))}else i=o;f.push(o,i)}else i[4]&&(g!==h&&(j?a.Pb&&a.Pb(e,f):a.Fb&&a.Fb(e)),j&&g&12&&(c=c===l?b.toLowerCase():c.substring(c.length-b.length),d=c.indexOf("</"+e),0>d&&(d=b.length),g&4?a.Cb&&a.Cb(b.substring(0,
d)):a.Nb&&a.Nb(b.substring(0,d).replace(Id,"&amp;$1").replace(Jd,"&lt;").replace(Kd,"&gt;")),b=b.substring(d)),e=g=j=h,f.length=0,d=m);else if(i[1])Td(a,i[0]);else if(i[3])j=!i[2],d=k,e=i[3].toLowerCase(),g=$.hasOwnProperty(e)?$[e]:h;else if(i[4])Td(a,i[4]);else if(i[5])switch(i[5]){case "<":Td(a,"&lt;");break;case ">":Td(a,"&gt;");break;default:Td(a,"&amp;")}}for(c=a.G.length;0<=--c;)a.L.append("</",a.G[c],">");a.G.length=0};
Fd.prototype.bc=function(a){a=a.toLowerCase();if(Gd.hasOwnProperty(a))return Gd[a];var b=a.match(Pd);return b?String.fromCharCode(parseInt(b[1],10)):(b=a.match(Qd))?String.fromCharCode(parseInt(b[1],16)):""};function Ud(){};/*
 Portions of this code are from the google-caja project, received by
 Google under the Apache license (http://code.google.com/p/google-caja/).
 All other code is Copyright 2009 Google, Inc. All Rights Reserved.

 // Copyright (C) 2006 Google Inc.
 //
 // Licensed under the Apache License, Version 2.0 (the "License");
 // you may not use this file except in compliance with the License.
 // You may obtain a copy of the License at
 //
 //      http://www.apache.org/licenses/LICENSE-2.0
 //
 // Unless required by applicable law or agreed to in writing, software
 // distributed under the License is distributed on an "AS IS" BASIS,
 // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 // See the License for the specific language governing permissions and
 // limitations under the License.

*/
function Vd(a,b){var c=new Ed;(new Fd).parse(new Wd(c,b,h),a);return c.toString()}function Wd(a,b,c){this.L=a;this.G=[];this.S=m;this.Rb=b;this.Ta=c}sa(Wd,Ud);
var Xd={"*::class":9,"*::dir":0,"*::id":4,"*::lang":0,"*::onclick":2,"*::ondblclick":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::style":3,"*::title":0,"*::accesskey":0,"*::tabindex":0,"*::onfocus":2,"*::onblur":2,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::rel":0,"a::rev":0,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,
"area::href":1,"area::nohref":0,"area::onfocus":2,"area::shape":0,"area::tabindex":0,"area::target":10,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::tabindex":0,"button::type":0,"button::value":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,
"colgroup::width":0,"del::cite":1,"del::datetime":0,"dir::compact":0,"div::align":0,"dl::compact":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,
"img::hspace":0,"img::ismap":0,"img::longdesc":1,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::autocomplete":0,"input::align":0,"input::alt":0,"input::checked":0,"input::disabled":0,"input::ismap":0,"input::maxlength":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::readonly":0,"input::size":0,"input::src":1,"input::tabindex":0,"input::type":0,"input::usemap":11,"input::value":0,
"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"ol::compact":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"p::align":0,"pre::width":0,"q::cite":1,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,
"select::onfocus":2,"select::size":0,"select::tabindex":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,
"textarea::accesskey":0,"textarea::cols":0,"textarea::disabled":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::readonly":0,"textarea::rows":0,"textarea::tabindex":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,
"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"ul::compact":0,"ul::type":0};
Wd.prototype.Pb=function(a,b){if(!this.S&&$.hasOwnProperty(a)){var c=$[a];if(!(c&32))if(c&16)this.S=!(c&2);else{for(var d=b,f=0;f<d.length;f+=2){var e=d[f],g=d[f+1],j=l,i;if((i=a+"::"+e,Xd.hasOwnProperty(i))||(i="*::"+e,Xd.hasOwnProperty(i)))j=Xd[i];if(j!==l)switch(j){case 0:break;case 2:case 3:g=l;break;case 4:case 5:case 6:case 7:case 8:case 9:g=this.Ta?this.Ta(g):g;break;case 1:g=this.Rb&&this.Rb(g);break;case 11:g&&"#"===g.charAt(0)?(g=this.Ta?this.Ta(g):g)&&(g="#"+g):g=l;break;default:g=l}else g=
l;d[f+1]=g}if(b=d){c&2||this.G.push(a);this.L.append("<",a);c=0;for(d=b.length;c<d;c+=2)f=b[c],e=b[c+1],e!==l&&e!==h&&this.L.append(" ",f,'="',e.replace(Hd,"&amp;").replace(Jd,"&lt;").replace(Kd,"&gt;").replace(Ld,"&#34;").replace(Md,"&#61;"),'"');this.L.append(">")}}}};
Wd.prototype.Fb=function(a){if(this.S)this.S=m;else if($.hasOwnProperty(a)){var b=$[a];if(!(b&50)){if(b&1)for(b=this.G.length;0<=--b;){var c=this.G[b];if(c===a)break;if(!($[c]&1))return}else for(b=this.G.length;0<=--b&&!(this.G[b]===a););if(!(0>b)){for(var d=this.G.length;--d>b;)c=this.G[d],$[c]&1||this.L.append("</",c,">");this.G.length=b;this.L.append("</",a,">")}}}};function Td(a,b){a.S||a.L.append(b)}Wd.prototype.Nb=function(a){this.S||this.L.append(a)};Wd.prototype.Cb=function(a){this.S||this.L.append(a)};function U(a,b){this.element=H(Yd);this.e=a;this.Ub=a.getItem();this.Aa=I(".annotorious-editor-text",this.element)[0];this.Sb=I(".annotorious-editor-button-cancel",this.element)[0];this.sb=I(".annotorious-editor-button-save",this.element)[0];this.Tb=Yb(this.sb);this.sa=[];var c=this;M(this.Sb,"click",function(b){b.preventDefault();a.K(c.zb);c.close()});M(this.sb,"click",function(b){b.preventDefault();b=c.Gb();a.r(b);a.K();c.zb?a.fireEvent(Zd,b):a.fireEvent($d,b);c.close()});S(this.element,m);b.appendChild(this.element);
this.Aa.focus()}r=U.prototype;r.fb=function(a){var b=Sb("div","annotorious-editor-field");t(a)?b.innerHTML=a:ga(a)?this.sa.push({w:b,ib:a}):Xb(a)&&b.appendChild(a);a=this.Tb;a.parentNode&&a.parentNode.insertBefore(b,a)};r.open=function(a){if(this.Ga=this.zb=a)this.Aa.value=a.text;S(this.element,k);this.Aa.focus();u(this.sa,function(b){var c=b.ib(a);t(c)?b.w.innerHTML=c:Xb(c)&&(Vb(b.w),b.w.appendChild(c))})};r.close=function(){S(this.element,m);this.Aa.value=""};
r.ea=function(a){Fc(this.element,a.x,a.y)};r.Gb=function(){var a=Vd(this.Aa.value,function(a){return a});this.Ga?this.Ga.text=a:this.Ga=new Bd(this.Ub.src,a,this.e.Q().Na());return this.Ga};U.prototype.addField=U.prototype.fb;U.prototype.getAnnotation=U.prototype.Gb;function Tc(){this.ta=[]}Tc.prototype.g=function(a,b){this.ta[a]||(this.ta[a]=[]);this.ta[a].push(b)};Tc.prototype.ma=function(a,b){var c=this.ta[a];c&&z(c,b)};Tc.prototype.fireEvent=function(a,b){var c=this.ta[a];c&&u(c,function(a){a(b)})};var $c="onMouseOverItem",ad="onMouseOutOfItem",kd="onMouseOverAnnotation",md="onMouseOutOfAnnotation",wd="onSelectionStarted",cd="onSelectionCanceled",bd="onSelectionCompleted",ld="beforePopupHide",$d="onAnnotationCreated",Zd="onAnnotationUpdated",ae={};function Zc(a,b,c){var d=this;c||(c="Click and Drag to Annotate");this.element=H(be,{mb:c});this.e=a;this.wb=I(".annotorious-hint-msg",this.element)[0];this.ub=I(".annotorious-hint-icon",this.element)[0];this.eb=function(){d.show()};this.cb=function(){ce(d)};this.oa();ce(this);b.appendChild(this.element)}
Zc.prototype.oa=function(){var a=this;this.yb=M(this.ub,"mouseover",function(){a.show();window.clearTimeout(a.$a)});this.xb=M(this.ub,"mouseout",function(){ce(a)});this.e.g($c,this.eb);this.e.g(ad,this.cb)};Zc.prototype.ra=function(){N(this.yb);N(this.xb);this.e.ma($c,this.eb);this.e.ma(ad,this.cb)};Zc.prototype.show=function(){window.clearTimeout(this.$a);R(this.wb,0.8);var a=this;this.$a=window.setTimeout(function(){ce(a)},3E3)};function ce(a){window.clearTimeout(a.$a);R(a.wb,0)};function T(a,b){this.element=H(de);this.e=b;this.Xb=I(".annotorious-popup-text",this.element)[0];this.H=I(".annotorious-popup-buttons",this.element)[0];this.Za=m;this.sa=[];var c=I(".annotorious-popup-button-edit",this.H)[0],d=I(".annotorious-popup-button-delete",this.H)[0],f=this;M(c,"mouseover",function(){Ab(c,"annotorious-popup-button-active")});M(c,"mouseout",function(){Cb(c,"annotorious-popup-button-active")});M(c,"click",function(){R(f.element,0);P(f.element,"pointer-events","none");b.Eb(f.f)});
M(d,"mouseover",function(){Ab(d,"annotorious-popup-button-active")});M(d,"mouseout",function(){Cb(d,"annotorious-popup-button-active")});M(d,"click",function(){R(f.element,0);P(f.element,"pointer-events","none");b.fireEvent("onAnnotationRemoved",f.f);b.m(f.f)});M(this.element,"mouseover",function(){window.clearTimeout(f.Ya);0.9>(f.H.style[Oa("opacity")]||"")&&R(f.H,0.9);nd(f)});M(this.element,"mouseout",function(){R(f.H,0);X(f)});b.g(ae.ec,function(){X(f)});R(this.H,0);R(this.element,0);P(this.element,
"pointer-events","none");a.appendChild(this.element)}T.prototype.fb=function(a){var b=Sb("div","annotorious-popup-field");t(a)?b.innerHTML=a:ga(a)?this.sa.push({w:b,ib:a}):Xb(a)&&b.appendChild(a);this.element.appendChild(b)};function X(a){a.Za=m;a.xa||(a.xa=window.setTimeout(function(){a.e.fireEvent(ld,a);a.Za||(R(a.element,0),P(a.element,"pointer-events","none"),R(a.H,0.9),delete a.xa)},300))}function nd(a){a.Za=k;a.xa&&(window.clearTimeout(a.xa),delete a.xa)}
T.prototype.show=function(a,b){nd(this);if(a&&b){this.f=a;this.Xb.innerHTML=a.text?a.text:'<span class="annotorious-popup-empty">No comment</span>';"editable"in a&&a.editable==m?S(this.H,m):S(this.H,k);this.ea(b);this.Ya&&window.clearTimeout(this.Ya);R(this.H,0.9);var c=this;this.Ya=window.setTimeout(function(){R(c.H,0)},1E3);u(this.sa,function(b){var c=b.ib(a);t(c)?b.w.innerHTML=c:Xb(c)&&(Vb(b.w),b.w.appendChild(c))})}R(this.element,0.9);P(this.element,"pointer-events","auto")};
T.prototype.ea=function(a){Fc(this.element,new Hb(a.x,a.y))};T.prototype.addField=T.prototype.fb;A&&E(8);function ee(a){return"object"===typeof a&&a&&0===a.ic?a.content:(""+a).replace(fe,ge)}var he={"\x00":"&#0;",'"':"&quot;","&":"&amp;","'":"&#39;","<":"&lt;",">":"&gt;","\t":"&#9;","\n":"&#10;","\x0B":"&#11;","\u000c":"&#12;","\r":"&#13;"," ":"&#32;","-":"&#45;","/":"&#47;","=":"&#61;","`":"&#96;","\u0085":"&#133;","\u00a0":"&#160;","\u2028":"&#8232;","\u2029":"&#8233;"};function ge(a){return he[a]}var fe=/[\x00\x22\x26\x27\x3c\x3e]/g;function de(){return'<div class="annotorious-popup" style="position:absolute;z-index:1"><div class="annotorious-popup-buttons"><a class="annotorious-popup-button annotorious-popup-button-edit" title="Edit" href="javascript:void(0);">EDIT</a><a class="annotorious-popup-button annotorious-popup-button-delete" title="Delete" href="javascript:void(0);">DELETE</a></div><span class="annotorious-popup-text"></span></div>'}
function Yd(){return'<div class="annotorious-editor" style="position:absolute;z-index:1"><form><textarea class="annotorious-editor-text" placeholder="Add a Comment..." tabindex="1"></textarea><div class="annotorious-editor-button-container"><a class="annotorious-editor-button annotorious-editor-button-cancel" href="javascript:void(0);" tabindex="3">Cancel</a><a class="annotorious-editor-button annotorious-editor-button-save" href="javascript:void(0);" tabindex="2">Save</a></div></form></div>'};function Vc(a){return'<canvas class="annotorious-item annotorious-opacity-fade" style="position:absolute; top:0px; left:0px; width:'+ee(a.width)+"px; height:"+ee(a.height)+'px; z-index:0" width="'+ee(a.width)+'" height="'+ee(a.height)+'"></canvas>'}
function be(a){return'<div class="annotorious-hint" style="white-space:nowrap; position:absolute; top:0px; left:0px; pointer-events:none;"><div class="annotorious-hint-msg annotorious-opacity-fade">'+ee(a.mb)+'</div><div class="annotorious-hint-icon" style="pointer-events:auto"></div></div>'};function sd(a){return'<div class="annotorious-opacity-fade" style="white-space:nowrap; position:absolute; pointer-events:none; top:80px; width:100%; text-align:center;"><div class="annotorious-ol-hint annotorious-ol-hint-secondary" style="width: 400px; margin:0px auto;">'+ee(a.mb)+"</dvi></div>"};
